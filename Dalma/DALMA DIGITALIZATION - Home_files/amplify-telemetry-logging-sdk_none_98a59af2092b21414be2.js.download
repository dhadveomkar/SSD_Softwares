/*! For license information please see amplify-telemetry-logging-sdk_none_242d53bb676278ac57c9.js.LICENSE.txt */
define("32da76e8-9227-4d5c-ae14-342a59f7f14e_0.1.0",["@microsoft/sp-core-library","tslib","@msinternal/odsp-core-bundle"],(e,t,n)=>(()=>{var a={328:(e,t,n)=>{var a=n(277);e.exports=a.StringHelper}
,676:t=>{"use strict";t.exports=e},277:e=>{"use strict";e.exports=n},280:e=>{"use strict";e.exports=t}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return a[e](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";function e(e,t){const n={};return Object.keys(t).forEach(a=>{let i=t[a];null!=i&&("string"==typeof i?(i=i.trim(),i&&(n[`${e}_${a}`]=t[a])):n[`${e}_${a}`]=t[a])}),n}function t(e,t){if(e.isTest||"onebox"===t.Environment)return"eb94303419d94534b616e34850eff6a3-d3cbcd85-dac6-4066-b218-826d99d1c42f-7504";switch((t.CloudType||"").toLowerCase()){case"devbox":case"prodbubble":case"spdf":case"edog":return"930040d5f2d14c649c8f4a22a062a2af-a8806003-7416-4799-9a3a-31de703592e5-6968";default:return"28f004ff2be44e8997a6f113043d583d-3f663b9a-4911-45b4-be6d-e450ca91e808-7336"}}r.r(o),r.d(o,{Amplify1DSLogger:()=>Gs,AmplifyCustomerPromiseEvent:()=>s,AmplifyEngagementEvent:()=>c,AmplifyQosEvent:()=>d,BaseDurationEvent:()=>i,BaseTelemetryEvent:()=>n,getTenantToken:()=>t});class n{getEventMetadata(e,t){return{Name:this.eventName,ResultType:this.eventResultType,WebLog_FullName:this.eventType,WebLog_EventType:this.eventState}}constructor(e,t,n,a,i,r){this.eventName=e,this.eventState=a,this.eventId="10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),this.ariaTableName=n,this.extraPropertyPrefix=i,this.eventType=t,this.vector=r}}var a=r(676);class i extends n{getEventMetadata(e,t){return"Start"===this.eventState?{...super.getEventMetadata(e,t)}:{...super.getEventMetadata(e,t),ResultCode:this.errorInfo?.errorCode||"",ErrorMessage:this.errorInfo?.error?.message||"",ErrorStack:this.errorInfo?.error?.stack||"",Duration:this.eventEndTime?Math.trunc(this.eventEndTime-this.eventStartTime):-1}}endEvent(e,t,n){"Start"===this.eventState?(this.eventEndTime=window.performance.now(),this.eventState="End",e||!a._SPKillSwitch.isActivated("a2a0bc30-7971-46d4-8be7-6d25253abe3f")&&n?(this.errorInfo={error:e,errorCode:n,expected:t||!1},this.eventResultType=t?"ExpectedFailure":"Failure"):this.eventResultType="Success"):console.warn("Event already ended",this.eventName)}constructor(e,t,n,a,i){super(e,t,n,"Start",a,i),this.eventStartTime=window.performance.now()}}class s extends i{endEvent(e,t,n,a){super.endEvent(e,t,n),a&&(this._getVeto=()=>a)}getEventMetadata(e,t){return{...super.getEventMetadata(e,t),WebLog_Type_CustomerPromise:1,SessionId:t.Session||"",ErrorCode:this.errorInfo?.errorCode||"",Ring:t.CloudType||"",Veto:this._getVeto(this),Product:e.product,Pillar:this._pillar,Scenario:this._scenario,...this._getExtraProperties(e,t)}}_getExtraProperties(t,n){return e(this.extraPropertyPrefix,{uniqueEventId:this.eventId,correlationId:t.clientCorrelationId,applicationName:this.eventName,debugSession:t.isTest,experiments:window.ODSP_EXPERIMENTS,Product:t.product,Veto:this._getVeto(this),Endpoint:this._endpoint,Scenario:this._scenario,Pillar:this._pillar})}constructor(e,t,n,a,i){super(t,"CustomerPromise","ev_customerpromise","CustomerPromise_extraData",i),this._scenario=t,this._endpoint=e,this._pillar=n,this._getVeto=a||(e=>{})}}class c extends n{getEventMetadata(e,t){return{...super.getEventMetadata(e,t),WebLog_Type_Engagement:1,Component:this._component,Feature:this._feature,WebId:t.WebId||"",WebTemplateId:t.WebTemplateId||"",ListId:t.ListId||"",DocId:t.DocId||"",SiteSubscriptionId:t.SiteSubscriptionId||"",Workload:t.Workload||"",AccountType:t.IsAuthenticated?"Business":"BusinessAnonymous",CloudType:t.CloudType||"",Environment:t.Environment||"",SessionId:t.Session||"",...this._getExtraProperties(e,t)}}_getExtraProperties(t,n){return e(this.extraPropertyPrefix,{...this.eventExtraData,uniqueEventId:this.eventId,debugSession:t.isTest,CorrelationId:t.clientCorrelationId})}constructor(e,t,n,a){super(e,"Engagement","ev_engagement","Single","Engagement_extraData"),this.eventExtraData={},this.eventExtraData=a,this._component=t,this._feature=n}}class d extends i{getEventMetadata(e,t){return{...super.getEventMetadata(e,t),WebLog_Type_Qos:1,SiteSubscriptionId:t.SiteSubscriptionId||"",Workload:t.Workload||"",AccountType:t.IsAuthenticated?"Business":"BusinessAnonymous",CloudType:t.CloudType||"",Environment:t.Environment||"",SessionId:t.Session||"",...this._getExtraProperties(e,t)}}_getExtraProperties(t,n){return e(this.extraPropertyPrefix,{uniqueEventId:this.eventId,debugSession:t.isTest,CorrelationId:t.clientCorrelationId,alias:this.alias,...this.extraData||{}})}constructor(e,t,n){super(e,"QoS","ev_qos","Qos_extraData",n),this.eventName=e,this.alias=t}}var l="function",u="object",f="undefined",p=Object,m=p.prototype,_=p.assign,h=p.create,b=p.defineProperty,g=m.hasOwnProperty,v=null;function y(e){void 0===e&&(e=!0);var t=!1===e?null:v;return t||(typeof globalThis!==f&&(t=globalThis),t||typeof self===f||(t=self),t||typeof window===f||(t=window),t||typeof r.g===f||(t=r.g),v=t),t}function S(e){throw new TypeError(e)}function D(e){if(h)return h(e);if(null==e)return{};var t=typeof e;function n(){}return t!==u&&t!==l&&S("Object prototype may only be an Object:"+e),n.prototype=e,new n}(y()||{}).Symbol,(y()||{}).Reflect;var I,x=function(e,t){return x=p.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},x(e,t)};function C(e,t){function n(){this.constructor=e}typeof t!==l&&null!==t&&S("Class extends value "+String(t)+" is not a constructor or null"),x(e,t),e.prototype=null===t?D(t):(n.prototype=t.prototype,new n)}function O(e,t){for(var n=0,a=t.length,i=e.length;n<a;n++,i++)e[i]=t[n];return e}var w,E="undefined",A="prototype",L="function",k="_dynClass",M="_unknown_",P=Object,T=P.getPrototypeOf,U=P.getOwnPropertyNames,F=(typeof globalThis!==E&&(w=globalThis),w||typeof self===E||(w=self),w||typeof window===E||(w=window),w||typeof r.g===E||(w=r.g),w||{}),H=F.__dynProto$Gbl||(F.__dynProto$Gbl={o:(I={},I.setInstFuncs=!0,I.useBaseInst=!0,I),n:1e3});function R(e,t){return e&&P.prototype.hasOwnProperty.call(e,t)}function N(e){return e&&(e===P.prototype||e===Array.prototype)}function B(e){return N(e)||e===Function.prototype}function j(e){var t;if(e){if(T)return T(e);var n=e.__proto__||e.prototype||(e.constructor?e.constructor.prototype:null);t=e._dyn__proto__||n,R(e,"_dyn__proto__")||(delete e._dynInstProto,t=e._dyn__proto__=e._dynInstProto||e._dyn__proto__,e._dynInstProto=n)}return t}function V(e,t){var n=[];if(U)n=U(e);else for(var a in e)"string"==typeof a&&R(e,a)&&n.push(a);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function z(e,t,n){return"constructor"!==t&&typeof e[t]===L&&(n||R(e,t))}function G(e){throw new TypeError("DynamicProto: "+e)}function K(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function W(e,t,n,a){var i=null;if(e&&R(n,k)){var r=e._dynInstFuncs||{};if((i=(r[n._dynClass]||{})[t])||G("Missing ["+t+"] "+L),!i._dynInstChk&&!1!==r._dynInstChk){for(var o=!R(e,t),s=j(e),c=[];o&&s&&!B(s)&&!K(c,s);){var d=s[t];if(d){o=d===a;break}c.push(s),s=j(s)}try{o&&(e[t]=i),i._dynInstChk=1}catch(e){r._dynInstChk=!1}}}return i}function q(e,t,n){var a=t[e];return a===n&&(a=j(t)[e]),typeof a!==L&&G("["+e+"] is not a "+L),a}function Q(e,t){return R(e,A)?e.name||t||M:((e||{}).constructor||{}).name||t||M}function Y(e,t,n,a){R(e,A)||G("theClass is an invalid class definition.");var i=e.prototype;(function(e,t){if(T){for(var n=[],a=j(t);a&&!B(a)&&!K(n,a);){if(a===e)return!0;n.push(a),a=j(a)}return!1}return!0})(i,t)||G("["+Q(e)+"] not in hierarchy of ["+Q(t)+"]");var r=null;R(i,k)?r=i._dynClass:(r="_dynCls$"+Q(e,"_")+"$"+H.n,H.n++,i._dynClass=r);var o=Y._dfOpts,s=!!o.useBaseInst;s&&a&&void 0!==a.useBaseInst&&(s=!!a.useBaseInst);var c=function(e){var t={};return V(e,function(n){!t[n]&&z(e,n,!1)&&(t[n]=e[n])}),t}(t),d=function(e,t,n,a){function i(e,t,n){var i=t[n];if(i._isDynProxy&&a){var r=e._dynInstFuncs||{};!1!==r._dynInstChk&&(i=(r[t._dynClass]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var r={};V(n,function(e){r[e]=i(t,n,e)});for(var o=j(e),s=[];o&&!B(o)&&!K(s,o);)V(o,function(e){!r[e]&&z(o,e,!T)&&(r[e]=i(t,o,e))}),s.push(o),o=j(o);return r}(i,t,c,s);n(t,d);var l=!!T&&!!o.setInstFuncs;l&&a&&(l=!!a.setInstFuncs),function(e,t,n,a,i){if(!N(e)){var r=n._dynInstFuncs=n._dynInstFuncs||{},o=r[t]=r[t]||{};!1!==r._dynInstChk&&(r._dynInstChk=!!i),V(n,function(t){z(n,t,!1)&&n[t]!==a[t]&&(o[t]=n[t],delete n[t],(!R(e,t)||e[t]&&!e[t]._isDynProxy)&&(e[t]=function(e,t){var n=function(){return(W(this,t,e,n)||q(t,e,n)).apply(this,arguments)};return n._isDynProxy=1,n}(e,t)))})}}(i,r,t,c,!1!==l)}Y._dfOpts=H.o;var J="",X="extensionConfig",Z=b,$=p.freeze,ee=(p.seal,p.keys),te=String.prototype,ne=te.trim,ae=te.endsWith,ie=te.startsWith,re=Date.prototype.toISOString,oe=Array.isArray,se=m.toString,ce=g.toString,de=ce.call(p),le=/-([a-z])/g,ue=/([^\w\d_$])/g,fe=/^(\d+[\w\d_$])/,pe=Object.getPrototypeOf;function me(e){return void 0===e||typeof e===f}function _e(e){return null===e||me(e)}function he(e){return!_e(e)}function be(e){return!(!e||typeof e!==u)}function ge(e){return!(!e||typeof e!==l)}function ve(e){var t=e;return t&&xe(t)&&(t=(t=(t=t.replace(le,function(e,t){return t.toUpperCase()})).replace(ue,"_")).replace(fe,function(e,t){return"_"+t})),t}function ye(e,t){if(e)for(var n in e)g.call(e,n)&&t.call(e,n,e[n])}function Se(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=ie?e.startsWith(t):function(e,t){var n=!1,a=t?t.length:0;if(e&&a&&e.length>=a&&!(n=e===t)){for(var i=0;i<a;i++)if(e[i]!==t[i])return!1;n=!0}return n}(e,t)),n}function De(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}var Ie=oe||function(e){return!(!e||"[object Array]"!==se.call(e))};function xe(e){return"string"==typeof e}function Ce(e){return"number"==typeof e}function Oe(e){return"boolean"==typeof e}function we(e){var t=!1;if(e&&"object"==typeof e){var n=pe?pe(e):function(e){if(e){if(pe)return pe(e);var t=e.__proto__||e.prototype||e.constructor;if(t)return t}return null}(e);n?(n.constructor&&g.call(n,"constructor")&&(n=n.constructor),t=typeof n===l&&ce.call(n)===de):t=!0}return t}function Ee(e){if(e)return re?e.toISOString():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function Ae(e,t,n){var a=e.length;try{for(var i=0;i<a&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}catch(e){}}function Le(e,t,n){if(e){if(e.indexOf)return e.indexOf(t,n);var a=e.length,i=n||0;try{for(var r=Math.max(i>=0?i:a-Math.abs(i),0);r<a;r++)if(r in e&&e[r]===t)return r}catch(e){}}return-1}function ke(e){return e&&(e=ne&&e.trim?e.trim():e.replace?e.replace(/^\s+|(?=\s)\s+$/g,J):e),e}var Me=!{toString:null}.propertyIsEnumerable("toString"),Pe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Te(e){var t=typeof e;if(t===l||t===u&&null!==e||S("objKeys called on non-object"),!Me&&ee)return ee(e);var n=[];for(var a in e)e&&g.call(e,a)&&n.push(a);if(Me)for(var i=Pe.length,r=0;r<i;r++)e&&g.call(e,Pe[r])&&n.push(Pe[r]);return n}function Ue(e,t,n,a){if(Z)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),a&&(i.set=a),Z(e,t,i),!0}catch(e){}return!1}function Fe(e){return $&&ye(e,function(e,t){(Ie(t)||be(t))&&$(t)}),He(e)}var He=$||function(e){return e};function Re(){var e=Date;return e.now?e.now():(new e).getTime()}function Ne(e){return(t=e)&&"[object Error]"===se.call(t)?e.name:J;var t}function Be(e,t,n,a,i){var r=n;return e&&((r=e[t])===n||i&&!i(r)||a&&!a(n)||(r=n,e[t]=r)),r}function je(e,t,n){var a;return e?!(a=e[t])&&_e(a)&&(a=me(n)?{}:n,e[t]=a):a=me(n)?{}:n,a}function Ve(e,t){return _e(e)?t:e}function ze(e){return!!e}function Ge(e){throw new Error(e)}function Ke(e,t,n,a,i){e&&t&&n&&(!1!==i||me(e[t]))&&(e[t]=function(e,t){var n=null,a=null;return ge(e)?n=e:a=e,function(){var e=arguments;if(n&&(a=n()),a)return a[t].apply(a,e)}}(n,a))}function We(e,t,n,a){return e&&t&&be(e)&&Ie(n)&&Ae(n,function(n){xe(n)&&Ke(e,n,t,n,a)}),e}function qe(e){return e&&_&&(e=p(_({},e))),e}function Qe(e,t,n,a,i,r){var o=arguments,s=o[0]||{},c=o.length,d=!1,l=1;for(c>0&&Oe(s)&&(d=s,s=o[l]||{},l++),be(s)||(s={});l<c;l++){var u=o[l],f=Ie(u),p=be(u);for(var m in u){var _=f&&m in u||p&&g.call(u,m);if(_){var h=u[m],b=void 0;if(d&&h&&((b=Ie(h))||we(h))){var v=s[m];b?Ie(v)||(v=[]):we(v)||(v={}),h=Qe(d,v,h)}void 0!==h&&(s[m]=h)}}}return s}var Ye="window",Je="JSON",Xe="XMLHttpRequest",Ze=null,$e=null,et=null,tt=null;function nt(e,t){var n=!1;if(e){try{if(!(n=t in e)){var a=e.prototype;a&&(n=t in a)}}catch(e){}if(!n)try{n=!me((new e)[t])}catch(e){}}return n}function at(e){var t=y();return t&&t[e]?t[e]:e===Ye&&it()?window:null}function it(){return Boolean(typeof window===u&&window)}function rt(){return it()?window:at(Ye)}function ot(){return Boolean(typeof document===u&&document)}function st(){return ot()?document:at("document")}function ct(){return Boolean(typeof navigator===u&&navigator)}function dt(){return ct()?navigator:at("navigator")}function lt(e){return typeof location===u&&location?location:at("location")}function ut(){return Boolean(typeof JSON===u&&JSON||null!==at(Je))}function ft(){return ut()?JSON||at(Je):null}function pt(){var e=dt();return!(!e||!e.product)&&"ReactNative"===e.product}function mt(){var e=dt();if(e&&(e.userAgent!==$e||null===Ze)){var t=(($e=e.userAgent)||J).toLowerCase();Ze=De(t,"msie")||De(t,"trident/")}return Ze}function _t(e){var t=Object.prototype.toString.call(e),n=J;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":ut()&&(n=ft().stringify(e)),t+n}function ht(){return null===tt&&(tt=ct()&&Boolean(dt().sendBeacon)),tt}function bt(e){var t=!1;try{t=!!at("fetch");var n=at("Request");t&&e&&n&&(t=nt(n,"keepalive"))}catch(e){}return t}function gt(){var e=!1;try{e=!!at(Xe)}catch(e){}return e}var vt,yt=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],St=null;function Dt(e,t){return function(){var n=arguments,a=It(t);if(a){var i=a.listener;i&&i[e]&&i[e].apply(i,n)}}}function It(e){var t,n=St;return n||!0===e.disableDbgExt||(n=St||((t=at("Microsoft"))&&(St=t.ApplicationInsights),St)),n?n.ChromeDbgExt:null}function xt(e){if(!vt){vt={};for(var t=0;t<yt.length;t++)vt[yt[t]]=Dt(yt[t],e)}return vt}function Ct(e){return e?'"'+e.replace(/\"/g,J)+'"':J}function Ot(e,t){var n=typeof console!==f?console:at("console");if(n){var a="log";n[e]&&(a=e),ge(n[a])&&n[a](t)}}var wt=function(){function e(e,t,n,a){void 0===n&&(n=!1);var i=this;i.messageId=e,i.message=(n?"AI: ":"AI (Internal): ")+e;var r=J;ut()&&(r=ft().stringify(a));var o=(t?" message:"+Ct(t):J)+(a?" props:"+Ct(r):J);i.message+=o}return e.dataType="MessageData",e}();function Et(e,t){return(e||{}).logger||new At(t)}var At=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,a,i,r,o=0,s={};Y(e,this,function(e){function c(t,n){if(!(o>=i)){var r=!0,c="AITR_"+n.messageId;if(s[c]?r=!1:s[c]=!0,r&&(t<=a&&(e.queue.push(n),o++,d(1===t?"error":"warn",n)),o===i)){var l="Internal events throttle limit per PageView reached for this app.",u=new wt(23,l,!1);e.queue.push(u),1===t?e.errorToConsole(l):e.warnToConsole(l)}}}function d(e,n){var a=It(t||{});a&&a.diagLog&&a.diagLog(e,n)}!function(e){n=Ve(e.loggingLevelConsole,0),a=Ve(e.loggingLevelTelemetry,1),i=Ve(e.maxMessageLimit,25),r=Ve(e.enableDebug,Ve(e.enableDebugExceptions,!1))}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return a},e.maxInternalMessageLimit=function(){return i},e.enableDebugExceptions=function(){return r},e.throwInternal=function(t,a,i,o,l){void 0===l&&(l=!1);var u=new wt(a,i,l,o);if(r)throw _t(u);var f=1===t?"errorToConsole":"warnToConsole";if(me(u.message))d("throw"+(1===t?"Critical":"Warning"),u);else{if(l){var p=+u.messageId;!s[p]&&n>=t&&(e[f](u.message),s[p]=!0)}else n>=t&&e[f](u.message);c(t,u)}},e.warnToConsole=function(e){Ot("warn",e),d("warning",e)},e.errorToConsole=function(e){Ot("error",e),d("error",e)},e.resetInternalMessageCount=function(){o=0,s={}},e.logInternalMessage=c})}return e.__ieDyn=1,e}();function Lt(e){return e||new At}function kt(e,t,n,a,i,r){void 0===r&&(r=!1),Lt(e).throwInternal(t,n,a,i,r)}function Mt(e,t){Lt(e).warnToConsole(t)}var Pt=function(){function e(t,n,a){var i,r=this,o=!1;r.start=Re(),r.name=t,r.isAsync=a,r.isChildEvt=function(){return!1},ge(n)&&(o=Ue(r,"payload",function(){return!i&&ge(n)&&(i=n(),n=null),i})),r.getCtx=function(t){return t?t===e.ParentContextKey||t===e.ChildrenContextKey?r[t]:(r.ctx||{})[t]:null},r.setCtx=function(t,n){t&&(t===e.ParentContextKey?(r[t]||(r.isChildEvt=function(){return!0}),r[t]=n):t===e.ChildrenContextKey?r[t]=n:(r.ctx=r.ctx||{})[t]=n)},r.complete=function(){var t=0,a=r.getCtx(e.ChildrenContextKey);if(Ie(a))for(var i=0;i<a.length;i++){var s=a[i];s&&(t+=s.time)}r.time=Re()-r.start,r.exTime=r.time-t,r.complete=function(){},!o&&ge(n)&&(r.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),Tt=function(){function e(t){this.ctx={},Y(e,this,function(e){e.create=function(e,t,n){return new Pt(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&ge(t.perfEvent)&&t.perfEvent(e))},e.setCtx=function(t,n){t&&((e.ctx=e.ctx||{})[t]=n)},e.getCtx=function(t){return(e.ctx||{})[t]}})}return e.__ieDyn=1,e}(),Ut="CoreUtils.doPerf";function Ft(e,t,n,a,i){if(e){var r=e;if(r.getPerfMgr&&(r=r.getPerfMgr()),r){var o=void 0,s=r.getCtx(Ut);try{if(o=r.create(t(),a,i)){if(s&&o.setCtx&&(o.setCtx(Pt.ParentContextKey,s),s.getCtx&&s.setCtx)){var c=s.getCtx(Pt.ChildrenContextKey);c||(c=[],s.setCtx(Pt.ChildrenContextKey,c)),c.push(o)}return r.setCtx(Ut,o),n(o)}}catch(e){o&&o.setCtx&&o.setCtx("exception",e)}finally{o&&r.fire(o),r.setCtx(Ut,s)}}}return n()}var Ht=4294967296,Rt=4294967295,Nt=!1,Bt=123456789,jt=987654321;function Vt(e){var t=0,n=at("crypto")||at("msCrypto");return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&Rt),0===t&&mt()&&(Nt||function(){try{var e=2147483647&Re();(t=(Math.random()*Ht^e)+e)<0&&(t>>>=0),Bt=123456789+t&Rt,jt=987654321-t&Rt,Nt=!0}catch(e){}var t}(),t=function(e){var t=((jt=36969*(65535&jt)+(jt>>16)&Rt)<<16)+(65535&(Bt=18e3*(65535&Bt)+(Bt>>16)&Rt))>>>0&Rt|0;return t>>>=0}()&Rt),0===t&&(t=Math.floor(Ht*Math.random()|0)),e||(t>>>=0),t}function zt(e){void 0===e&&(e=22);for(var t=Vt()>>>0,n=0,a=J;a.length<e;)n++,a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Vt()<<2&4294967295|3&t)>>>0,n=0);return a}var Gt=b,Kt="."+zt(6),Wt=0;function qt(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function Qt(e,t){return void 0===t&&(t=!1),ve(e+Wt+++(t?".2.8.16":J)+Kt)}function Yt(e){var t={id:Qt("_aiData-"+(e||J)+".2.8.16"),accept:function(e){return qt(e)},get:function(e,n,a,i){var r=e[t.id];return r?r[ve(n)]:(i&&((r=function(e,t){var n=t[e.id];if(!n){n={};try{qt(t)&&(function(e,t,n){if(Gt)try{return Gt(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[ve(n)]=a),a)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}function Jt(e,t,n){return!(!e||e.length!==t||e===n||!e.match(/^[\da-f]*$/i))}function Xt(e){return Jt(e,32,"00000000000000000000000000000000")}function Zt(e){return Jt(e,16,"0000000000000000")}var $t=Yt("plugin");function en(e){return $t.get(e,"state",{},!0)}function tn(e,t){for(var n,a=[],i=null,r=e.getNext();r;){var o=r.getPlugin();o&&(i&&ge(i.setNextPlugin)&&ge(o.processTelemetry)&&i.setNextPlugin(o),(ge(o.isInitialized)?o.isInitialized():(n=en(o)).isInitialized)||a.push(o),i=o,r=r.getNext())}Ae(a,function(a){var i=e.core();a.initialize(e.getCfg(),i,t,e.getNext()),n=en(a),a.core||n.core||(n.core=i),n.isInitialized=!0,delete n.teardown})}function nn(e){return e.sort(function(e,t){var n=0;if(t){var a=ge(t.processTelemetry);ge(e.processTelemetry)?n=a?e.priority-t.priority:1:a&&(n=-1)}else n=e?1:-1;return n})}var an=0;function rn(e,t,n,a){var i=null,r=[];null!==a&&(i=a?function(e,t,n){for(;e;){if(e.getPlugin()===n)return e;e=e.getNext()}return dn([n],t.config||{},t)}(e,n,a):e);var o={_next:function(){var e=i;if(i=e?e.getNext():null,!e){var t=r;t&&t.length>0&&(Ae(t,function(e){try{e.func.call(e.self,e.args)}catch(e){kt(n.logger,2,73,"Unexpected Exception during onComplete - "+_t(e))}}),r=[])}return e},ctx:{core:function(){return n},diagLog:function(){return Et(n,t)},getCfg:function(){return t},getExtCfg:s,getConfig:function(e,n,a){void 0===a&&(a=!1);var i,r=s(e,null);return r&&!_e(r[n])?i=r[n]:t&&!_e(t[n])&&(i=t[n]),_e(i)?a:i},hasNext:function(){return!!i},getNext:function(){return i},setNext:function(e){i=e},iterate:function(e){for(var t;t=o._next();){var n=t.getPlugin();n&&e(n)}},onComplete:function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];e&&r.push({func:e,self:me(t)?o.ctx:t,args:n})}}};function s(e,n,a){var i;if(void 0===n&&(n={}),void 0===a&&(a=0),t){var r=t.extensionConfig;r&&e&&(i=r[e])}if(i){if(be(n)&&0!==a){var o=Qe(!0,n,i);t&&2===a&&ye(n,function(e){if(_e(o[e])){var n=t[e];_e(n)||(o[e]=n)}}),i=o}}else i=n;return i}return o}function on(e,t,n,a){var i=rn(e,t,n,a),r=i.ctx;return r.processNext=function(e){var t=i._next();return t&&t.processTelemetry(e,r),!t},r.createNew=function(e,a){return void 0===e&&(e=null),Ie(e)&&(e=dn(e,t,n,a)),on(e||r.getNext(),t,n,a)},r}function sn(e,t,n){var a=t.config||{},i=rn(e,a,t,n),r=i.ctx;return r.processNext=function(e){var t=i._next();return t&&t.unload(r,e),!t},r.createNew=function(e,n){return void 0===e&&(e=null),Ie(e)&&(e=dn(e,a,t,n)),sn(e||r.getNext(),t,n)},r}function cn(e,t,n){var a=t.config||{},i=rn(e,a,t,n).ctx;return i.processNext=function(e){return i.iterate(function(t){ge(t.update)&&t.update(i,e)})},i.createNew=function(e,n){return void 0===e&&(e=null),Ie(e)&&(e=dn(e,a,t,n)),cn(e||i.getNext(),t,n)},i}function dn(e,t,n,a){var i=null,r=!a;if(Ie(e)&&e.length>0){var o=null;Ae(e,function(e){if(r||a!==e||(r=!0),r&&e&&ge(e.processTelemetry)){var s=function(e,t,n){var a,i=null,r=ge(e.processTelemetry),o=ge(e.setNextPlugin),s={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:function(a,d){c(d=d||function(){var a;return e&&ge(e._getTelCtx)&&(a=e._getTelCtx()),a||(a=on(s,t,n)),a}(),function(t){if(!e||!r)return!1;var n=en(e);return!n.teardown&&!n.disabled&&(o&&e.setNextPlugin(i),e.processTelemetry(a,t),!0)},"processTelemetry",function(){return{item:a}},!a.sync)||d.processNext(a)},unload:function(t,n){c(t,function(){var a=!1;if(e){var i=en(e),r=e.core||i.core;!e||r&&r!==t.core()||i.teardown||(i.core=null,i.teardown=!0,i.isInitialized=!1,e.teardown&&!0===e.teardown(t,n)&&(a=!0))}return a},"unload",function(){},n.isAsync)||t.processNext(n)},update:function(t,n){c(t,function(){var a=!1;if(e){var i=en(e),r=e.core||i.core;!e||r&&r!==t.core()||i.teardown||e.update&&!0===e.update(t,n)&&(a=!0)}return a},"update",function(){},!1)||t.processNext(n)},_id:a=e?e.identifier+"-"+e.priority+"-"+an++:"Unknown-0-"+an++,_setNext:function(e){i=e}};function c(t,n,r,o,s){var c=!1,d=e?e.identifier:"TelemetryPluginChain",l=t._hasRun;return l||(l=t._hasRun={}),t.setNext(i),e&&Ft(t.core(),function(){return d+":"+r},function(){l[a]=!0;try{var e=i?i._id:J;e&&(l[e]=!1),c=n(t)}catch(e){var o=!i||l[i._id];o&&(c=!0),i&&o||kt(t.diagLog(),1,73,"Plugin ["+d+"] failed during "+r+" - "+_t(e)+", run flags: "+_t(l))}},o,s),c}return He(s)}(e,t,n);i||(i=s),o&&o._setNext(s),o=s}})}return a&&!i?dn([a],t,n):i}var ln=function(e,t,n,a){var i=on(e,t,n,a);We(this,i,Te(i))};function un(e,t,n){t&&Ie(t)&&t.length>0&&(Ae(t=t.sort(function(e,t){return e.priority-t.priority}),function(e){e.priority<500&&Ge("Channel has invalid priority - "+e.identifier)}),e.push({queue:He(t),chain:dn(t,n.config,n)}))}var fn="toGMTString",pn="toUTCString",mn=null,_n=null,hn=null,bn=st(),gn={},vn={};function yn(e){return!e||e.isEnabled()}function Sn(e,t){return!!(t&&e&&Ie(e.ignoreCookies))&&-1!==e.ignoreCookies.indexOf(t)}function Dn(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var a=t.cookieCfg;n=a._ckMgr?a._ckMgr:In(t)}return n||(n=function(e,t){var n=In._ckMgr||vn._ckMgr;return n||(n=In._ckMgr=In(e,t),vn._ckMgr=n),n}(t,(e||{}).logger)),n}function In(e,t){var n,a=function(e){var t=e.cookieCfg=e.cookieCfg||{};if(Be(t,"domain",e.cookieDomain,he,_e),Be(t,"path",e.cookiePath||"/",null,_e),_e(t.enabled)){var n=void 0;me(e.isCookieUseDisabled)||(n=!e.isCookieUseDisabled),me(e.disableCookiesUsage)||(n=!e.disableCookiesUsage),t.enabled=n}return t}(e||vn),i=a.path||"/",r=a.domain,o=!1!==a.enabled,s=((n={isEnabled:function(){var e=o&&xn(t),n=vn._ckMgr;return e&&n&&s!==n&&(e=yn(n)),e}}).setEnabled=function(e){o=!1!==e},n.set=function(e,t,n,o,c){var d,l=!1;if(yn(s)&&!function(e,t){return!!(t&&e&&Ie(e.blockedCookies)&&-1!==e.blockedCookies.indexOf(t))||Sn(e,t)}(a,e)){var u={},f=ke(t||J),p=f.indexOf(";");if(-1!==p&&(f=ke(t.substring(0,p)),u=Cn(t.substring(p+1))),Be(u,"domain",o||r,ze,me),!_e(n)){var m=mt();if(me(u.expires)){var _=Re()+1e3*n;if(_>0){var h=new Date;h.setTime(_),Be(u,"expires",On(h,m?fn:pn)||On(h,m?fn:pn)||J,ze)}}m||Be(u,"max-age",J+n,null,me)}var b=lt();b&&"https:"===b.protocol&&(Be(u,"secure",null,null,me),null===_n&&(d=(dt()||{}).userAgent,_n=!(xe(d)&&(De(d,"CPU iPhone OS 12")||De(d,"iPad; CPU OS 12")||De(d,"Macintosh; Intel Mac OS X 10_14")&&De(d,"Version/")&&De(d,"Safari")||De(d,"Macintosh; Intel Mac OS X 10_14")&&function(e,t){var n=!1;return e&&!(n=e===t)&&(n=ae?e.endsWith(t):function(e,t){var n=!1,a=t.length,i=e?e.length:0;if(a&&i&&i>=a&&!(n=e===t)){for(var r=i-1,o=a-1;o>=0;o--){if(e[r]!=t[o])return!1;r--}n=!0}return n}(e,t)),n}(d,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||De(d,"Chrome/5")||De(d,"Chrome/6")||De(d,"UnrealEngine")&&!De(d,"Chrome")||De(d,"UCBrowser/12")||De(d,"UCBrowser/11")))),_n&&Be(u,"SameSite","None",null,me)),Be(u,"path",c||i,null,me),(a.setCookie||An)(e,wn(f,u)),l=!0}return l},n.get=function(e){var t=J;return yn(s)&&!Sn(a,e)&&(t=(a.getCookie||En)(e)),t},n.del=function(e,t){var n=!1;return yn(s)&&(n=s.purge(e,t)),n},n.purge=function(e,n){var i,r=!1;if(xn(t)){var o=((i={}).path=n||"/",i.expires="Thu, 01 Jan 1970 00:00:01 GMT",i);mt()||(o["max-age"]="0"),(a.delCookie||An)(e,wn(J,o)),r=!0}return r},n);return s._ckMgr=s,s}function xn(e){if(null===mn){mn=!1;try{mn=void 0!==(bn||{}).cookie}catch(t){kt(e,2,68,"Cannot access document.cookie - "+Ne(t),{exception:_t(t)})}}return mn}function Cn(e){var t={};return e&&e.length&&Ae(ke(e).split(";"),function(e){if(e=ke(e||J)){var n=e.indexOf("=");-1===n?t[e]=null:t[ke(e.substring(0,n))]=ke(e.substring(n+1))}}),t}function On(e,t){return ge(e[t])?e[t]():null}function wn(e,t){var n=e||J;return ye(t,function(e,t){n+="; "+e+(_e(t)?J:"="+t)}),n}function En(e){var t=J;if(bn){var n=bn.cookie||J;hn!==n&&(gn=Cn(n),hn=n),t=ke(gn[e]||J)}return t}function An(e,t){bn&&(bn.cookie=e+"="+t)}function Ln(){var e=[];return{add:function(t){t&&e.push(t)},run:function(t,n){Ae(e,function(e){try{e(t,n)}catch(e){kt(t.diagLog(),2,73,"Unexpected error calling unload handler - "+_t(e))}}),e=[]}}}var kn=function(){function e(){var t,n,a,i,r,o=this;function s(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||on(null,{},o.core);t=a&&a.getPlugin?i.createNew(null,a.getPlugin):i.createNew(null,a)}return t}function c(e,t,i){e&&Be(e,X,[],null,_e),!i&&t&&(i=t.getProcessTelContext().getNext());var r=a;a&&a.getPlugin&&(r=a.getPlugin()),o.core=t,n=on(i,e,t,r)}function d(){t=!1,o.core=null,n=null,a=null,r=[],i=Ln()}d(),Y(e,o,function(e){e.initialize=function(e,n,a,i){c(e,n,i),t=!0},e.teardown=function(t,n){var o,s=e.core;if(s&&(!t||s===t.core())){var c,l=!1,u=t||sn(null,s,a&&a.getPlugin?a.getPlugin():a),f=n||((o={reason:0}).isAsync=!1,o);return e._doTeardown&&!0===e._doTeardown(u,f,p)?c=!0:p(),c}function p(){if(!l){l=!0,i.run(u,n);var e=r;r=[],Ae(e,function(e){e.rm()}),!0===c&&u.processNext(f),d()}}},e.update=function(t,n){var i=e.core;if(i&&(!t||i===t.core())){var r,o=!1,s=t||cn(null,i,a&&a.getPlugin?a.getPlugin():a),d=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(s,d,l)?r=!0:l(),r}function l(){o||(o=!0,c(s.getCfg(),s.core(),s.getNext()))}},e._addHook=function(e){e&&(Ie(e)?r=r.concat(e):r.push(e))},Ke(e,"_addUnloadCb",function(){return i},"add")}),o.diagLog=function(e){return s(e).diagLog()},o.isInitialized=function(){return t},o.setInitialized=function(e){t=e},o.setNextPlugin=function(e){a=e},o.processNext=function(e,t){t?t.processNext(e):a&&ge(a.processTelemetry)&&a.processTelemetry(e,null)},o._getTelCtx=s}return e.__ieDyn=1,e}(),Mn=function(e){function t(){var n,a,i=e.call(this)||this;function r(){n=0,a=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,r(),Y(t,i,function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return a.push(t),{remove:function(){Ae(a,function(e,n){if(e.id===t.id)return a.splice(n,1),-1})}}},e.processTelemetry=function(t,n){for(var i=!1,r=a.length,o=0;o<r;++o){var s=a[o];if(s)try{if(!1===s.fn.apply(null,[t])){i=!0;break}}catch(e){kt(n.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Ne(e),{exception:_t(e)},!0)}}i||e.processNext(t,n)},e._doTeardown=function(){r()}}),i}return C(t,e),t.__ieDyn=1,t}(kn),Pn="Plugins must provide initialize method",Tn="SDK is still unloading...",Un={loggingLevelConsole:1};function Fn(e,t){return new Tt(t)}function Hn(e,t){var n=!1;return Ae(t,function(t){if(t===e)return n=!0,-1}),n}var Rn=function(){function e(){var t,n,a,i,r,o,s,c,d,l,u,f,p,m,_,h,b,g,v,y,S=0,I=!1;Y(e,this,function(e){function x(n){if(!S&&!I&&(n||e.logger&&e.logger.queue.length>0)){var a=Ve(t.diagnosticLogInterval);a&&a>0||(a=1e4),S=setInterval(function(){clearInterval(S),S=0,M()},a)}return S}function C(){n=!1,t=Qe(!0,{},Un),e.config=t,e.logger=new At(t),e._extensions=[],_=new Mn,a=[],i=null,r=null,o=null,s=null,c=null,l=null,d=[],u=null,f=null,p=null,m=!1,h=null,b=Qt("AIBaseCore",!0),g=Ln(),y=null}function w(){var n=on(L(),t,e);return n.onComplete(x),n}function E(n){var a=function(e,t,n){var a,i=[],r={};return Ae(n,function(t){(_e(t)||_e(t.initialize))&&Ge(Pn);var n=t.priority,a=t.identifier;t&&n&&(_e(r[n])?r[n]=a:Mt(e,"Two extensions have same priority #"+n+" - "+r[n]+", "+a)),(!n||n<500)&&i.push(t)}),(a={all:n}).core=i,a}(e.logger,0,d);l=a.core,c=null;var i=a.all;if(p=He(function(e,t,n){var a=[];if(e&&Ae(e,function(e){return un(a,e,n)}),t){var i=[];Ae(t,function(e){e.priority>500&&i.push(e)}),un(a,i,n)}return a}(f,i,e)),u){var r=Le(i,u);-1!==r&&i.splice(r,1),-1!==(r=Le(l,u))&&l.splice(r,1),u._setQueue(p)}else u=function(e,t){function n(){return on(null,t.config,t,null)}function a(e,t,n,a){var i=e?e.length+1:1;function r(){0==--i&&(a&&a(),a=null)}i>0&&Ae(e,function(e){if(e&&e.queue.length>0){var a=e.chain,o=t.createNew(a);o.onComplete(r),n(o)}else i--}),r()}var i=!1,r={identifier:"ChannelControllerPlugin",priority:500,initialize:function(t,n,a,r){i=!0,Ae(e,function(e){e&&e.queue.length>0&&tn(on(e.chain,t,n),a)})},isInitialized:function(){return i},processTelemetry:function(t,i){a(e,i||n(),function(e){e.processNext(t)},function(){i.processNext(t)})},update:function(t,n){var i=n||{reason:0};return a(e,t,function(e){e.processNext(i)},function(){t.processNext(i)}),!0},pause:function(){a(e,n(),function(e){e.iterate(function(e){e.pause&&e.pause()})},null)},resume:function(){a(e,n(),function(e){e.iterate(function(e){e.resume&&e.resume()})},null)},teardown:function(t,n){var r=n||{reason:0,isAsync:!1};return a(e,t,function(e){e.processNext(r)},function(){t.processNext(r),i=!1}),!0},getChannel:function(t){var n=null;return e&&e.length>0&&Ae(e,function(e){if(e&&e.queue.length>0&&(Ae(e.queue,function(e){if(e.identifier===t)return n=e,-1}),n))return-1}),n},flush:function(t,i,r,o){var s=1,c=!1,d=null;function l(){s--,c&&0===s&&(d&&(clearTimeout(d),d=null),i&&i(c),i=null)}return o=o||5e3,a(e,n(),function(e){e.iterate(function(e){if(e.flush){s++;var n=!1;e.flush(t,function(){n=!0,l()},r)||n||(t&&null==d?d=setTimeout(function(){d=null,l()},o):l())}})},function(){c=!0,l()}),!0},_setQueue:function(t){e=t}};return r}(p,e);i.push(u),l.push(u),e._extensions=nn(i),u.initialize(t,e,i),tn(w(),i),e._extensions=He(nn(l||[])).slice(),n&&function(t){var n=cn(L(),e);n.onComplete(x),e._updateHook&&!0===e._updateHook(n,t)||n.processNext(t)}(n)}function A(t){var n,a=null,i=null;return Ae(e._extensions,function(e){if(e.identifier===t&&e!==u&&e!==_)return i=e,-1}),!i&&u&&(i=u.getChannel(t)),i&&((n={plugin:i}).setEnabled=function(e){en(i).disabled=!e},n.isEnabled=function(){var e=en(i);return!e.teardown&&!e.disabled},n.remove=function(e,t){var n;void 0===e&&(e=!0);var a=[i],r=((n={reason:1}).isAsync=e,n);k(a,r,function(e){e&&E({reason:32,removed:a}),t&&t(e)})},a=n),a}function L(){if(!c){var n=(l||[]).slice();-1===Le(n,_)&&n.push(_),c=dn(nn(n),t,e)}return c}function k(n,a,i){if(n&&n.length>0){var r=sn(dn(n,t,e),e);r.onComplete(function(){var e=!1,t=[];Ae(d,function(a,i){Hn(a,n)?e=!0:t.push(a)}),d=t;var a=[];f&&(Ae(f,function(t,i){var r=[];Ae(t,function(t){Hn(t,n)?e=!0:r.push(t)}),a.push(r)}),f=a),i&&i(e),x()}),r.processNext(a)}else i(!1)}function M(){if(e.logger&&e.logger.queue){var n=e.logger.queue.slice(0);e.logger.queue.length=0,Ae(n,function(n){var a,i=((a={}).name=h||"InternalMessageId: "+n.messageId,a.iKey=Ve(t.instrumentationKey),a.time=Ee(new Date),a.baseType=wt.dataType,a.baseData={message:n.message},a);e.track(i)})}}function P(e,t,n,a){return u?u.flush(e,t,n||6,a):(t&&t(!1),!0)}function T(t){var n=e.logger;n?(kt(n,2,73,t),x()):Ge(t)}C(),e.isInitialized=function(){return n},e.initialize=function(a,r,s,c){var l,u;m&&Ge(Tn),e.isInitialized()&&Ge("Core should not be initialized more than once"),t=a||{},e.config=t,_e(a.instrumentationKey)&&Ge("Please provide instrumentation key"),i=c,e._notificationManager=c,!0===(u=Ve(t.disableDbgExt))&&v&&(i.removeNotificationListener(v),v=null),i&&!v&&!0!==u&&(v=xt(t),i.addNotificationListener(v)),!(l=Ve(t.enablePerfMgr))&&o&&(o=null),l&&je(t,"createPerfMgr",Fn),je(t,X,{}).NotificationManager=i,s&&(e.logger=s);var _=je(t,"extensions",[]);(d=[]).push.apply(d,O(O([],r),_)),f=je(t,"channels",[]),E(null),p&&0!==p.length||Ge("No channels available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return p&&Ae(p,function(t){e.push(t.queue)}),He(e)},e.track=function(n){n.iKey=n.iKey||t.instrumentationKey,n.time=n.time||Ee(new Date),n.ver=n.ver||"4.0",!m&&e.isInitialized()?w().processNext(n):a.push(n)},e.getProcessTelContext=w,e.getNotifyMgr=function(){return i||(i=function(){var e;return D(((e={}).addNotificationListener=function(e){},e.removeNotificationListener=function(e){},e.eventsSent=function(e){},e.eventsDiscarded=function(e,t){},e.eventsSendRequest=function(e,t){},e))}(),e._notificationManager=i),i},e.addNotificationListener=function(e){i&&i.addNotificationListener(e)},e.removeNotificationListener=function(e){i&&i.removeNotificationListener(e)},e.getCookieMgr=function(){return s||(s=In(t,e.logger)),s},e.setCookieMgr=function(e){s=e},e.getPerfMgr=function(){if(!r&&!o&&Ve(t.enablePerfMgr)){var n=Ve(t.createPerfMgr);ge(n)&&(o=n(e,e.getNotifyMgr()))}return r||o||null},e.setPerfMgr=function(e){r=e},e.eventCnt=function(){return a.length},e.releaseQueue=function(){if(n&&a.length>0){var e=a;a=[],Ae(e,function(e){w().processNext(e)})}},e.pollInternalLogs=function(e){return h=e||null,I=!1,S&&(clearInterval(S),S=null),x(!0)},e.stopPollingInternalLogs=function(){I=!0,S&&(clearInterval(S),S=0,M())},We(e,function(){return _},["addTelemetryInitializer"]),e.unload=function(t,a,i){var r;void 0===t&&(t=!0),n||Ge("SDK is not initialized"),m&&Ge(Tn);var o=((r={reason:50}).isAsync=t,r.flushComplete=!1,r),s=sn(L(),e);function c(t){o.flushComplete=t,m=!0,g.run(s,o),e.stopPollingInternalLogs(),s.processNext(o)}s.onComplete(function(){C(),a&&a(o)},e),M(),P(t,c,6,i)||c(!1)},e.getPlugin=A,e.addPlugin=function(e,t,n,a){if(!e)return a&&a(!1),void T(Pn);var i=A(e.identifier);if(i&&!t)return a&&a(!1),void T("Plugin ["+e.identifier+"] is already loaded!");var r={reason:16};function o(t){d.push(e),r.added=[e],E(r),a&&a(!0)}if(i){var s=[i.plugin];k(s,{reason:2,isAsync:!!n},function(e){e?(r.removed=s,r.reason|=32,o()):a&&a(!1)})}else o()},e.evtNamespace=function(){return b},e.flush=P,e.getTraceCtx=function(e){var t;return y||(t={},y={getName:function(){return t.name},setName:function(e){t.name=e},getTraceId:function(){return t.traceId},setTraceId:function(e){Xt(e)&&(t.traceId=e)},getSpanId:function(){return t.spanId},setSpanId:function(e){Zt(e)&&(t.spanId=e)},getTraceFlags:function(){return t.traceFlags},setTraceFlags:function(e){t.traceFlags=e}}),y},e.setTraceCtx=function(e){y=e||null},Ke(e,"addUnloadCb",function(){return g},"add")})}return e.__ieDyn=1,e}();function Nn(e,t,n,a){Ae(e,function(e){if(e&&e[t])if(n)setTimeout(function(){return a(e)},0);else try{a(e)}catch(e){}})}var Bn,jn=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;Y(e,this,function(e){e.addNotificationListener=function(t){e.listeners.push(t)},e.removeNotificationListener=function(t){for(var n=Le(e.listeners,t);n>-1;)e.listeners.splice(n,1),n=Le(e.listeners,t)},e.eventsSent=function(t){Nn(e.listeners,"eventsSent",!0,function(e){e.eventsSent(t)})},e.eventsDiscarded=function(t,n){Nn(e.listeners,"eventsDiscarded",!0,function(e){e.eventsDiscarded(t,n)})},e.eventsSendRequest=function(t,n){Nn(e.listeners,"eventsSendRequest",n,function(e){e.eventsSendRequest(t,n)})},e.perfEvent=function(t){t&&(!n&&t.isChildEvt()||Nn(e.listeners,"perfEvent",!1,function(e){t.isAsync?setTimeout(function(){return e.perfEvent(t)},0):e.perfEvent(t)}))}})}return e.__ieDyn=1,e}(),Vn=function(e){function t(){var n=e.call(this)||this;return Y(t,n,function(e,t){function n(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],2)}e.initialize=function(e,n,a,i){t.initialize(e,n,a||new At(e),i||new jn(e))},e.track=function(a){Ft(e.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){null===a&&(n(a),Ge("Invalid telemetry item")),function(e){_e(e.name)&&(n(e),Ge("telemetry name required"))}(a),t.track(a)},function(){return{item:a}},!a.sync)}}),n}return C(t,e),t.__ieDyn=1,t}(Rn),zn="",Gn="events",Kn="visibilitychange",Wn="pagehide",qn="pageshow",Qn="unload",Yn="beforeunload",Jn=Qt("aiEvtPageHide"),Xn=Qt("aiEvtPageShow"),Zn=/\.[\.]+/g,$n=/[\.]+$/,ea=1,ta=Yt("events"),na=/^([^.]*)(?:\.(.+)|)/;function aa(e){return e&&e.replace?e.replace(/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,J):e}function ia(e,t){var n;if(t){var a=J;Ie(t)?(a=J,Ae(t,function(e){(e=aa(e))&&("."!==e[0]&&(e="."+e),a+=e)})):a=aa(t),a&&("."!==a[0]&&(a="."+a),e=(e||J)+a)}var i=na.exec(e||J)||[];return(n={}).type=i[1],n.ns=(i[2]||J).replace(Zn,".").replace($n,J).split(".").sort().join("."),n}function ra(e,t,n){void 0===n&&(n=!0);var a=ta.get(e,Gn,{},n),i=a[t];return i||(i=a[t]=[]),i}function oa(e,t,n,a){e&&t&&t.type&&(e.removeEventListener?e.removeEventListener(t.type,n,a):e.detachEvent&&e.detachEvent("on"+t.type,n))}function sa(e,t,n,a){for(var i=t.length;i--;){var r=t[i];r&&(n.ns&&n.ns!==r.evtName.ns||a&&!a(r)||(oa(e,r.evtName,r.handler,r.capture),t.splice(i,1)))}}function ca(e,t){return t?ia("xx",Ie(t)?[e].concat(t):[e,t]).ns.split("."):e}function da(e,t,n,a,i){var r;void 0===i&&(i=!1);var o=!1;if(e)try{var s=ia(t,a);if(o=function(e,t,n,a){var i=!1;return e&&t&&t.type&&n&&(e.addEventListener?(e.addEventListener(t.type,n,a),i=!0):e.attachEvent&&(e.attachEvent("on"+t.type,n),i=!0)),i}(e,s,n,i),o&&ta.accept(e)){var c=((r={guid:ea++,evtName:s}).handler=n,r.capture=i,r);ra(e,s.type).push(c)}}catch(e){}return o}function la(e,t,n,a,i){if(void 0===i&&(i=!1),e)try{var r=ia(t,a),o=!1;!function(e,t,n){if(t.type)sa(e,ra(e,t.type),t,n);else{var a=ta.get(e,Gn,{});ye(a,function(a,i){sa(e,i,t,n)}),0===Te(a).length&&ta.kill(e,Gn)}}(e,r,function(e){return!((!r.ns||n)&&e.handler!==n||(o=!0,0))}),o||oa(e,r,n,i)}catch(e){}}function ua(e,t,n,a){var i=!1;return t&&e&&e.length>0&&Ae(e,function(e){e&&(n&&-1!==Le(n,e)||(i=function(e,t,n){var a=!1,i=rt();i&&(a=da(i,e,t,n),a=da(i.body,e,t,n)||a);var r=st();return r&&(a=da(r,e,t,n)||a),a}(e,t,a)||i))}),i}function fa(e,t,n){e&&Ie(e)&&Ae(e,function(e){e&&function(e,t,n){var a=rt();a&&(la(a,e,t,n),la(a.body,e,t,n));var i=st();i&&la(i,e,t,n)}(e,t,n)})}function pa(e,t,n){var a=ca(Jn,n),i=ua([Wn],e,t,a);return t&&-1!==Le(t,Kn)||(i=ua([Kn],function(t){var n=st();e&&n&&"hidden"===n.visibilityState&&e(t)},t,a)||i),!i&&t&&(i=pa(e,null,n)),i}function ma(e,t,n){var a=ca(Xn,n),i=ua([qn],e,t,a);return!(i=ua([Kn],function(t){var n=st();e&&n&&"visible"===n.visibilityState&&e(t)},t,a)||i)&&t&&(i=ma(e,null,n)),i}function _a(){var e=ha();return e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20)}function ha(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=J,a=0;a<4;a++)n+=t[15&(e=Vt())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Vt())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}var ba="1DS-Web-JS-3.2.15",ga="withCredentials",va=((Bn={})[0]=0,Bn[2]=6,Bn[1]=1,Bn[3]=7,Bn[4098]=6,Bn[4097]=1,Bn[4099]=7,Bn);function ya(e){return!(e===zn||_e(e))}function Sa(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return zn}function Da(e,t,n){var a=-1;if(!me(e))if(t>0&&(32===t?a=8192:t<=13&&(a=t<<5)),function(e){return e>=0&&e<=9}(n))-1===a&&(a=0),a|=n;else{var i=va[Ea(e)]||-1;-1!==a&&-1!==i?a|=i:6===i&&(a=i)}return a}function Ia(e,t,n){var a;return void 0===n&&(n=!0),e&&(a=e.get(t),n&&a&&decodeURIComponent&&(a=decodeURIComponent(a))),a||zn}function xa(e){void 0===e&&(e="D");var t=_a();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,zn)),t}function Ca(e,t,n,a,i){var r={},o=!1,s=0,c=arguments.length,d=Object.prototype,l=arguments;for("[object Boolean]"===d.toString.call(l[0])&&(o=l[0],s++);s<c;s++)ye(e=l[s],function(e,t){o&&t&&be(t)?Ie(t)?(r[e]=r[e]||[],Ae(t,function(t,n){t&&be(t)?r[e][n]=Ca(!0,r[e][n],t):r[e][n]=t})):r[e]=Ca(!0,r[e],t):r[e]=t});return r}Boolean(st()),Boolean(rt());var Oa=function(){var e=at("performance");return e&&e.now?e.now():Re()};function wa(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=Oa()}function Ea(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===u&&(t=4,Ie(e)?(t=4096,e.length>0&&(t|=Ea(e[0]))):g.call(e,"value")&&(t=8192|Ea(e.value)))}return t}var Aa=function(e){function t(){var n=e.call(this)||this;return n.pluginVersionStringArr=[],Y(t,n,function(e,t){e.logger&&e.logger.queue||(e.logger=new At({loggingLevelConsole:1})),e.initialize=function(n,a,i,r){Ft(e,function(){return"AppInsightsCore.initialize"},function(){var o=e.pluginVersionStringArr;if(n){n.endpointUrl||(n.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var s=n.propertyStorageOverride;!s||s.getProperty&&s.setProperty||Ge("Invalid property storage override passed."),n.channels&&Ae(n.channels,function(e){e&&Ae(e,function(e){if(e.identifier&&e.version){var t=e.identifier+"="+e.version;o.push(t)}})})}e.getWParam=function(){return"undefined"!=typeof document||n.enableWParam?0:-1},a&&Ae(a,function(e){if(e&&e.identifier&&e.version){var t=e.identifier+"="+e.version;o.push(t)}}),e.pluginVersionString=o.join(";"),e.pluginVersionStringArr=o;try{t.initialize(n,a,i,r),e.pollInternalLogs("InternalLog")}catch(t){var c=e.logger,d=_t(t);-1!==d.indexOf("channels")&&(d+="\n - Channels must be provided through config.channels only!"),kt(c,1,514,"SDK Initialization Failed - no telemetry will be sent: "+d)}},function(){return{config:n,extensions:a,logger:i,notificationManager:r}})},e.track=function(n){Ft(e,function(){return"AppInsightsCore.track"},function(){var a,i=n;if(i){i.timings=i.timings||{},i.timings.trackStart=Oa(),(a=i.latency)&&Ce(a)&&a>=1&&a<=4||(i.latency=1);var r=i.ext=i.ext||{};r.sdk=r.sdk||{},r.sdk.ver=ba;var o=i.baseData=i.baseData||{};o.properties=o.properties||{};var s=o.properties;s.version=s.version||e.pluginVersionString||zn}t.track(i)},function(){return{item:n}},!n.sync)}}),n}return C(t,e),t.__ieDyn=1,t}(Vn);const La=Aa;var ka=ge;function Ma(e,t,n){return function(a){e[t]=a,n()}}const Pa=function(){function e(t){var n=0,a=null,i=[];function r(){if(i.length>0){var e=i.slice();i=[],setTimeout(function(){for(var t=0,n=e.length;t<n;++t)try{e[t]()}catch(e){}},0)}}function o(e){0===n&&(a=e,n=1,r())}function s(e){0===n&&(a=e,n=2,r())}Y(e,this,function(t){t.then=function(t,o){return new e(function(s,c){!function(t,o,s,c){i.push(function(){var i;try{(i=1===n?ka(t)?t(a):a:ka(o)?o(a):a)instanceof e?i.then(s,c):2!==n||ka(o)?s(i):c(i)}catch(e){return void c(e)}}),0!==n&&r()}(t,o,s,c)})},t.catch=function(e){return t.then(null,e)}}),function(){if(!ka(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(o,s)}catch(e){s(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&ka(t.then)?new e(function(e,n){try{t.then(e,n)}catch(e){n(e)}}):new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.all=function(t){if(t&&t.length)return new e(function(e,n){try{for(var a=[],i=0,r=0;r<t.length;r++){var o=t[r];o&&ka(o.then)?(i++,o.then(Ma(a,r,function(){0==--i&&e(a)}),n)):a[r]=o}0===i&&setTimeout(function(){e(a)},0)}catch(e){n(e)}})},e.race=function(t){return new e(function(e,n){if(t&&t.length)try{for(var a=function(a){var i=t[a];i&&ka(i.then)?i.then(e,n):setTimeout(function(){e(i)},0)},i=0;i<t.length;i++)a(i)}catch(e){n(e)}})},e}();var Ta=0,Ua=[],Fa=[],Ha=[];function Ra(){return(new Date).getTime()}var Na=function(){function e(t,n){var a=0,i=(t||"<unnamed>")+"."+Ta;function r(e){var t=y();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+i+"] "+e)}function o(e){Mt(n,"ESPromiseScheduler["+i+"] "+e)}Ta++,Y(e,this,function(e){var t=null,n=0;function s(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e.splice(n,1)[0];return null}e.scheduleEvent=function(e,c,d){var l=i+"."+n;n++,c&&(l+="-("+c+")");var u=l+"{"+a+"}";a++;var f,p,m,_={evt:null,tm:Ra(),id:u,isRunning:!1,isAborted:!1};return _.evt=t?(f=_,p=t,m=new Pa(function(e,t){var n=Ra()-p.tm,a=p.id;r("["+l+"] is waiting for ["+a+":"+n+" ms] to complete before starting -- ["+Fa.length+"] waiting and ["+Ua.length+"] running"),f.abort=function(e){f.abort=null,s(Fa,l),f.isAborted=!0,t(new Error(e))},p.evt.then(function(n){s(Fa,l),S(f).then(e,t)},function(n){s(Fa,l),S(f).then(e,t)})}),Fa.push(f),m):S(_),(t=_).evt._schId=u,_.evt;function h(e){for(var t=Ra(),n=t-6e5,a=e.length,i=0;i<a;){var r=e[i];if(r&&r.tm<n){var s=null;r.abort?(s="Aborting ["+r.id+"] due to Excessive runtime ("+(t-r.tm)+" ms)",r.abort(s)):s="Removing ["+r.id+"] due to Excessive runtime ("+(t-r.tm)+" ms)",o(s),e.splice(i,1),a--}else i++}}function b(e,n){var a=!1,i=s(Ua,e);if(i||(i=s(Ha,e),a=!0),i){i.to&&(clearTimeout(i.to),i.to=null);var c=Ra()-i.tm;n?a?o("Timed out event ["+e+"] finally complete -- "+c+" ms"):r("Promise ["+e+"] Complete -- "+c+" ms"):(Ha.push(i),o("Event ["+e+"] Timed out and removed -- "+c+" ms"))}else r("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),h(Ua),h(Fa),h(Ha)}function g(e,t){return function(n){return b(e,!0),t&&t(n),n}}function v(e,t,n,a){t.then(function(t){return t instanceof Pa?(r("Event ["+e+"] returned a promise -- waiting"),v(e,t,n,a),t):g(e,n)(t)},g(e,a))}function y(e,t){var n=e.id;return new Pa(function(a,i){r("Event ["+n+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,b(n,!1),i(new Error(t))};var o=t(n);o instanceof Pa?(d&&(e.to=setTimeout(function(){b(n,!1),i(new Error("Timed out after ["+d+"] ms"))},d)),v(n,o,function(t){r("Event ["+n+"] Resolving after "+(Ra()-e.tm)+" ms"),a(t)},i)):(r("Promise ["+n+"] Auto completed as the start action did not return a promise"),a())})}function S(t){var n=Ra();return t.wTm=n-t.tm,t.tm=n,t.isAborted?Pa.reject(new Error("["+l+"] was aborted")):(Ua.push(t),y(t,e))}}})}return e.incomplete=function(){return Ua},e.waitingToStart=function(){return Fa},e}();const Ba=Na;var ja;function Va(e){return Ce(e)&&e>=1&&e<=2}!function(e){e[e.LocalStorage=1]="LocalStorage",e[e.SessionStorage=2]="SessionStorage",e[e.IndexedDb=3]="IndexedDb"}(ja||(ja={}));var za="DBError: Unable to open database",Ga="Database is not open",Ka="DBError: Failed to delete the database",Wa=["indexedDB"],qa=ge,Qa=xe;function Ya(e,t){at("QUnit")&&console&&console.log("IndexedDbHelper ["+e+"] "+t)}function Ja(e,t,n){e&&e.warnToConsole("IndexedDbHelper ["+t+"] "+n)}function Xa(e,t,n,a){return function(i){n(new Error(t)),Ya(e,"["+a+"] event rejected")}}var Za=[];function $a(e,t){for(var n=null,a=0;a<Za.length;a++)if((n=Za[a]).name===e)return n;return n={name:e,sch:new Ba("IndexedDbHelper["+e+"]",t),dbHdl:[],add:function(t){n.dbHdl.push(t),Ya(e,"- dbOpened (add) -- hdls ["+n.dbHdl.length+"]")},remove:function(t){for(var a=n.dbHdl,i=0;i<a.length;i++)if(a[i]===t){a.splice(i,1);break}Ya(e,"- dbClosed (remove) -- hdls ["+n.dbHdl.length+"]")},isOpen:function(){return n.dbHdl.length>0},openHdl:function(){return n.dbHdl.length>0?n.dbHdl[0]:null}},Za.push(n),n}var ei=function(){function e(t){Y(e,this,function(e){var n=function(){var e=y()||{},t=null;if(e)try{for(var n=0;n<Wa.length;n++)if((t=e[Wa[n]])&&qa(t.open))return t}catch(e){t=null}return t||null}()||null;function a(e,n){var a=e.db.transaction(n,"readwrite");return a.onabort=function(){Ja(t,e.dbName,"txn.onabort")},a.onerror=function(){Ja(t,e.dbName,"txn.onerror")},a.oncomplete=function(){Ya(e.dbName,"txn.oncomplete")},{db:e,store:a.objectStore(n),tx:a,tbl:n,openCursor:function(t,a){return r(e,n,t,a)},newTransaction:function(t){return i(e,n,t)}}}function i(e,t,n){if(!e||!e.db)return Pa.reject(new Error(Ga));try{var i=n(a(e,t));return i instanceof Pa?i:Pa.resolve(i)}catch(e){return Pa.reject(e)}}function r(e,t,n,i){if(!e||!e.db)return Pa.reject(new Error(Ga));var r=null;return n&&Qa(n)?r=new ti(n):n&&n.isMatch&&(r=n),new Pa(function(n,o){var s=[],c=null,d=null;r&&r.keyRange&&(d=r.keyRange());var l=a(e,t);(c=d?l.store.openCursor(d):l.store.openCursor()).onerror=Xa(l.db.dbName,"DBError: Failed to Open Cursor",o,"openCursor"),c.onsuccess=function(e){var t=e.target.result;if(t){var a={store:l,cursor:t,continue:function(){t.continue()},done:function(){n(s)}},c=t.value;if(!r||r.isMatch(c))if(i)try{switch(i(a,c,s)){case 2:n(s);break;case 1:break;default:a.continue()}}catch(e){o(e)}else s.push(c),a.continue();else a.continue()}else n(s)}})}function o(e,t,n,a){return $a(e).sch.scheduleEvent(n,t,a)}e.isAvailable=function(){return!!n},e.openDb=function(e,a,s,c){return o(e,"openDb",function(o){return new Pa(function(d,l){var u=!1;function f(t,n,o,s,c){var d={db:n,dbName:e,dbVersion:a,ctx:null,isNew:s,txn:o?o.transaction:null};return c||(d.openStore=function(e,t){return i(d,e,t)},d.openCursor=function(e,t,n){return r(d,e,t,n)}),d}var p=$a(e);if(null==n)l(new Error("No available storage factory"));else if(p.isOpen()){var m=f(0,p.openHdl(),null,!1);s(m).then(d,l)}else{var _=n.open(e,a);_.onblocked=function(n){Ja(t,e,"Db Open Blocked event ["+o+"] - "+(_.error||"")),l(new Error(za))},_.onerror=function(n){Ja(t,e,"Db Open Error event ["+o+"] - "+(_.error||"")),l(new Error(za))},_.onupgradeneeded=function(t){Ya(e,"Db Open Create/Upgrade needed event ["+o+"]");try{var n=t.target.result;if(!n)return void l(new Error(za));!function(e,t){var n=f(0,e,t,!0,!0);if(c)u=!0,c(n).then(function(){n.txn||(n.txn=t.transaction)},function(e){try{t.transaction&&t.transaction.abort()}finally{l(e)}});else try{t.transaction&&t.transaction.abort()}finally{l(new Error("DBError: Database upgrade required"))}}(n,_)}catch(t){Xa(e,za,l,o)(t)}},_.onsuccess=function(n){var a=n.target.result;a?function(n,a){var i=$a(e);i.add(n),n.onabort=function(a){Ja(t,e,"onabort -- closing the Db"),i.remove(n)},n.onerror=function(a){Ja(t,e,"onerror -- closing the Db"),i.remove(n)},n.onclose=function(a){Ja(t,e,"onclose -- closing the Db"),i.remove(n)},n.onversionchange=function(a){Ja(t,e,"onversionchange -- force closing the Db"),n.close(),i.remove(n)};var r,o=null;i.dbHdl.length>0&&(o=i.dbHdl[0]),r=f(0,o,a,u);try{s(r).then(function(e){d(e)},l)}catch(e){l(e)}}(a,_):l(new Error(za))}}})})},e.closeDb=function(e){o(e,"closeDb",function(t){var n=$a(e),a=n.dbHdl,i=a.length;if(i>0){for(var r=0;r<i;r++)a[r].close();n.dbHdl=[]}return Pa.resolve(1)})},e.deleteDb=function(e){return null==n?Pa.resolve(!1):o(e,"deleteDb",function(a){var i=$a(e),r=i.dbHdl,o=r.length;if(o>0){Ja(t,e,"Db is open ["+o+"] force closing");for(var s=0;s<o;s++)r[s].close();i.dbHdl=[]}return new Pa(function(i,r){setTimeout(function(){try{Ya(e,"["+a+"] starting");var o=n.deleteDatabase(e);o.onerror=function(n){Ja(t,e,"["+a+"] error!!"),r(new Error(Ka))},o.onblocked=function(n){Ja(t,e,"["+a+"] blocked!!"),r(new Error(Ka))},o.onupgradeneeded=function(n){Ja(t,e,"["+a+"] upgrade needed!!"),r(new Error(Ka))},o.onsuccess=function(t){Ya(e,"["+a+"] complete"),i(!0)},Ya(e,"["+a+"] started")}catch(n){Ja(t,e,"["+a+"] threw - "+n),r(new Error(Ka+" - "+n))}},0)})})},e.getDbDetails=function(e){return o(e,"getDbDetails",function(t){return null!=n&&n.databases?new Pa(function(t,a){n.databases().then(function(n){for(var i=0;i<n.length;i++)if(n[i].name===e)return void t(n[i]);a(new Error("DBError: Database does not exist"))},a)}):Pa.reject(new Error("DBError: Feature not supported"))},2e3)}})}return e.__ieDyn=1,e}(),ti=function(){function e(t){var n=[],a=null;Y(e,this,function(e){e.keyRange=function(){return a},e.parseQuery=function(t){if(n=[],t)for(var i=t.split(";"),r=0;r<i.length;r++){var o=i[r],s=o.indexOf("=");if(-1!==s){var c=o.substring(0,s),d=o.substring(s+1);0===c.indexOf("#")&&(c=c.substring(1),a||(a=IDBKeyRange.bound(d,d+""))),e.startsWith(c,d)}}},e.startsWith=function(e,t){n.push({name:e,value:t,type:0})},e.contains=function(e,t){n.push({name:e,value:t,type:1})},e.isMatch=function(e){if(!n||0===n.length)return!0;if(!e)return!1;for(var t=0;t<n.length;t++){var a=n[t],i=e[a.name];if(i)if(0===a.type){if(0!==i.indexOf(a.value))return!1}else if(1===a.type&&-1===i.indexOf(a.value))return!1}return!0},t&&e.parseQuery(t)})}return e.__ieDyn=1,e}(),ni=1008e4,ai="DBError: Unable to add event",ii="Evts",ri="iKey",oi=Va;function si(){return(new Date).getTime()}function ci(e){return e.openStore(ri,function(t){return new Pa(function(n,a){var i,r={iKey:e.ctx.iKey,tm:si()},o=t.store.put(r);o.onsuccess=function(e){n(o.result.toString())},o.onerror=function(e){a(new Error(ai))},o.onerror=(i=a,function(e){return i(new Error("DBError: Unable to update iKey"))})})})}function di(e){for(var t=[],n=2;n>=1;n--)for(var a=0;a<e.length;a++){var i=e[a];i&&i.evt.persistence===n&&t.push(i.evt)}return t}function li(e){return function(t){return e.continue()}}function ui(e){var t=e.cursor.delete();return t.onerror=li(e),t.onsuccess=li(e),1}function fi(e,t,n){return e.openCursor(ii,t,function(e,t,a){return n(t)?(a.push(t),ui(e)):0})}var pi=function(){function e(t){Y(e,this,function(e){var n=null,a=null,i="Unknown",r=null,o=null,s=null,c=-1,d=0;function l(e){return n.openDb(a,1,function(t){return new Pa(function(n,a){var c={iKey:i,storageId:r,iKeyPrefix:function(){return o},evtKeyPrefix:function(){return s}};t.ctx=c,ci(t).then(function(){e(t).then(n,a)},a)})},function(e){return new Pa(function(t,n){var a;(a=e.db).objectStoreNames.contains(ii)||a.createObjectStore(ii,{keyPath:"key"}).createIndex("EvntId","key",{unique:!1}),a.objectStoreNames.contains(ri)||a.createObjectStore(ri,{keyPath:"iKey"}).createIndex("iKey","iKey",{unique:!0}),t()})})}function u(e,t,n){return new Pa(function(a,i){function r(t,n){(function(e,t){return new Pa(function(n,a){var i=0,r=e.ctx.evtKeyPrefix();function o(){n(i)}function s(e,t){return new Pa(function(n){var a=e.store.delete(t.key);a.onsuccess=function(e){i++,n()},a.onerror=function(e){n()}})}e.openCursor(ii,"#key="+r,function(e,n,a){return n.evt.persistence<=t&&0===n.key.indexOf(r)&&(function(e,t){for(var n=0;n<e.length;n++)if(t.tm<e[n].tm)return void e.splice(n,0,t);e.push(t)}(a,n),a.length>10&&a.splice(a.length-1,1)),0}).then(function(t){0!==t.length?e.openStore(ii,function(e){for(var n=[],a=0;a<t.length;a++)n.push(s(e,t[a]));return Pa.all(n).then(o,o)}):o()},function(){n(0)})})})(e,t).then(function(e){e>0&&(d-=e),n(e)},function(e){n(0)})}function o(e){a(t.evt)}function s(){e.openStore(ii,function(s){var c=s.store.put(t);c.onsuccess=function(i){n&&ci(e).then(o,o),d++,a(t.evt)},c.onerror=function(o){function s(n){0===n&&i(new Error(ai)),u(e,t,!1).then(function(e){a(t.evt)},function(){i(new Error(ai))})}n?r(1,function(e){e>0?s(e):t.evt.persistence>=2?r(2,function(e){s(e)}):i(new Error(ai))}):i(new Error(ai))}})}c>0&&d>=c?r(1,function(e){0===e?t.evt.persistence>=2?r(2,function(e){s()}):i(new Error(ai)):s()}):s()})}e.id=t,e.initialize=function(t){var d=t.itemCtx.diagLog();if(!(n=new ei(d)).isAvailable())return n=null,!1;var u=t.itemCtx.getCfg(),f=t.storageConfig||{};return a=f.indexedDbName||"AppInsightEvents.1",i=u.instrumentationKey||i,r=e.id||t.id||_a(),s=(o=i+"::")+r+"::",c=f.maxStorageItems>0?f.maxStorageItems:c,l(function(e){return e.isNew?Pa.resolve(!0):function(e){return new Pa(function(t,n){(function(e){return new Pa(function(t,n){var a=!1;e.openCursor(ri,null,function(e,t,n){var i=t.tm;return si()-i<ni?0:(a=!0,2)}).then(function(){if(a){var i={};fi(e,null,function(e){if(!e||!e.evt||!e.evt.iKey)return!0;var t=e.tm;return si()-t>ni||(i[e.evt.iKey]=1,!1)}).then(function(){var a=[];e.openCursor(ri,null,function(e,t,n){var r=t.tm;return si()-r<ni||i[t.iKey]?0:(a.push(t),ui(e))}).then(function(){t(a)},n)},n)}else t([])},n)})})(e).then(function(){(function(e){return e.openCursor(ii,"#key="+e.ctx.iKeyPrefix(),function(t,n){var a,i=n.key;if(0===i.indexOf(e.ctx.iKeyPrefix())&&-1===i.indexOf(e.ctx.evtKeyPrefix())&&(a=n.tm,si()-a>6e5)){n.key=e.ctx.evtKeyPrefix()+n.id;var r=t.store.store.put(n);return r.onerror=li(t),r.onsuccess=function(e){try{ui(t)}catch(e){t.continue()}},1}return 0})})(e).then(t,t)},n)})}(e)}).then(function(e){},function(e){d.warnToConsole("IndexedDbProvider failed to initialize - "+(e||"<unknown>")),n=null}),!0},e.supportsSyncRequests=function(){return!1},e.getAllEvents=function(){return null!=n&&n.isAvailable()?l(function(e){return new Pa(function(t,n){(function(e,t){return e.openCursor(ii,t,function(e,t,n){return n.push(t),0})})(e,"#key="+e.ctx.evtKeyPrefix()).then(function(e){d=e.length,t(di(e))},n)})}):Pa.resolve([])},e.addEvent=function(e,t,a){return null!=n&&n.isAvailable()?(t.id=t.id||_a(),oi(t.persistence)||(t.persistence=1),l(function(n){var a=e||t.id,i={key:n.ctx.evtKeyPrefix()+a,id:a,evt:t,tm:si(),v:1};return u(n,i,!0)})):Pa.resolve(t)},e.removeEvents=function(e){if(null==n||!n.isAvailable())return Pa.resolve([]);var t=[];return new Pa(function(n,a){l(function(n){return n.openCursor(ii,"#key="+n.ctx.iKey,function(n,a,i){if(-1!==function(e,t){for(var n=t.length,a=0;a<n;a++)if(e===t[a].id)return a;return-1}(a.id,e)){var r=n.cursor.delete();return r.onerror=li(n),r.onsuccess=function(){t.push(a.evt),n.continue()},1}return 0})}).then(function(e){d-=t.length,n(t)},function(e){d-=t.length,n(t)})})},e.clear=function(){return null!=n&&n.isAvailable()?new Pa(function(e,t){l(function(e){return fi(e,"#key="+e.ctx.evtKeyPrefix(),function(t){return 0===t.key.indexOf(e.ctx.evtKeyPrefix())})}).then(function(t){d=0,e(di(t))},t)}):Pa.resolve([])},e.teardown=function(){n&&n.closeDb(a)}})}return e.__ieDyn=1,e}(),mi="AWTEvents";function _i(e,t){if(e)for(var n=Te(e),a=0;a<n.length;a++){var i=n[a];if(!t(e[i],i))break}}function hi(e){var t=!0;return _i(e,function(e,n){return e&&(t=!1),t}),t}function bi(e,t){for(var n=1,a=0,i=function(){var e=[],i=t[n];if(_i(i,function(t,n){return e.push(n),++a<10}),a>0){for(var r=0;r<e.length;r++)delete i[e[r]];return{value:!0}}n++};n<=e&&a<10;){var r=i();if("object"==typeof r)return r.value}return a>0}var gi=Va,vi=function(){function e(t,n){Y(e,this,function(e){var a=null,i=mi,r=null,o=null,s=null,c=5e6,d=null,l=null;function u(e,t){return{key:e,db:t}}function f(e,t){void 0===t&&(t=!0);var n=null;if(a){var i=a.getItem(e);if(i)try{n=JSON.parse(i)}catch(t){a.removeItem(e)}}return t&&!n&&(n={events:{1:{},2:{},3:{}},lastAccessTime:0}),u(e,n)}function p(e,t){void 0===t&&(t=!0);var n=!0,i=e.db;if(i){t&&(i.lastAccessTime=(new Date).getTime());for(var r=1;r<=2;r++)if(!hi(i.events[r])){n=!1;break}}try{if(n)a&&a.removeItem(e.key);else{var o=JSON.stringify(i);if(o.length>c)return!1;a&&a.setItem(e.key,o)}}catch(e){return!1}return!0}e.id=n,a=function(e){var t=y()||{},n=null;try{if(n=t[e]){var a="__storage_test__";n.setItem(a,a),n.removeItem(a)}}catch(e){(function(e,t){var n=!1;return t instanceof DOMException&&(22!==t.code&&"QuotaExceededError"!==t.name&&1014!==t.code&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||e&&0!==e.length&&(n=!0)),n})(n,e)||(n=null)}return n}(t)||null,e.initialize=function(t){if(!a)return!1;var n=t.storageConfig||{};return c=n.maxStorageSizeInBytes>0?n.maxStorageSizeInBytes:c,i=n.storageKey||mi,r=e.id||t.id||_a(),l=i+"."+r,d=i+"Version",o=t.itemCtx.getCfg().instrumentationKey,s=Sa(o)||o,function(){if(a){for(var e=a.getItem(d),t=[],n=f(l),r=!1,o=0;o<a.length;o++){var c=a.key(o);if(0===c.indexOf(i)&&c!==d){if("3"!==e){t.push(u(c,null));continue}var m=f(c,!1),_=m.db;if(_){if((new Date).getTime()-_.lastAccessTime>6e5){for(var h=1,b=function(){var e=_.events[h],t=n.db.events[h];_i(e,function(n,a){return(Sa(n.iKey)||n.iKey)===s&&(t[a]=n,delete e[a]),!0}),h++};h<=2;)b();r=!0,t.push(m)}}else t.push(u(c,null))}}for(o=0;o<t.length;o++)p(t[o],!1);r&&p(n),a.setItem(d,"3")}}(),!0},e.supportsSyncRequests=function(){return!0},e.getAllEvents=function(){try{var e=[],t=f(l,!1).db;if(t)for(var n=t.events,a=2;a>=1;a--)_i(n[a],function(t){return t&&(Sa(t.iKey)||t.iKey)===s&&e.push(t),!0});return Pa.resolve(e)}catch(e){return Pa.reject(e)}},e.addEvent=function(e,t,n){try{var a=f(l);t.id=t.id||_a(),gi(t.persistence)||(t.persistence=1);for(var i=t.persistence,r=t.id,o=a.db.events;;){if(o[i][r]=t,p(a))return Pa.resolve(t);if(delete o[i][r],!bi(i,o))return Pa.reject(new Error("Unable to free up event space"))}}catch(e){return Pa.reject(e)}},e.removeEvents=function(e){try{var t=f(l,!1),n=t.db;if(n){var i=n.events;try{for(var r=0;r<e.length;++r){var o=e[r];delete i[o.persistence][o.id]}if(p(t))return Pa.resolve(e)}catch(e){}e=function(e){var t=[],n=f(e,!1),i=n.db;if(i){var r=i.events;try{for(var o=1;o<=2;o++)_i(r[o],function(e,n){return e&&t.push(e),!0})}catch(e){}a&&a.removeItem(n.key)}return t}(t.key)}return Pa.resolve(e)}catch(e){return Pa.reject(e)}},e.clear=function(){try{var e=[],t=f(l,!1),n=t.db;if(n){for(var a=n.events,i=function(t){var n=a[t];_i(n,function(t){return t&&(Sa(t.iKey)||t.iKey)===s&&(delete n[t.id],e.push(t)),!0})},r=2;r>=1;r--)i(r);p(t)}return Pa.resolve(e)}catch(e){return Pa.reject(e)}},e.teardown=function(){try{var e=f(l,!1),t=e.db;t&&(t.lastAccessTime=0,p(e,!1))}catch(e){}}})}return e.__ieDyn=1,e}(),yi=Va,Si=function(e){function t(){var n=e.call(this)||this;return n.identifier="LocalStorage",n.priority=1009,n.version="3.2.15",Y(t,n,function(e,t){var n,a,i,r;function o(){n=!1,a=!1,i=null,r=[]}function s(e,t){i||(i=new Ba("LocalStorage")),i.scheduleEvent(function(e){return t(e)},e)}function c(t){Ft(e.core,function(){return"LocalStorageChannel:_sendStoredEventsToNextPlugin"},function(){s("sendToNext",function(n){return t.provider.getAllEvents().then(function(n){for(var a=0;a<n.length;a++)try{var i=n[a];(Sa(i.iKey)||i.iKey)===t.tenantId&&e.processNext(i,t.coreRootCtx.createNew())}catch(e){}})})},function(){return{iKeyConfig:t}})}function d(t,n){Ft(e.core,function(){return"LocalStorageChannel:_removeEvents"},function(){s("removeEvents",function(e){var a=[];return Ae(n,function(e){(Sa(e.iKey)||e.iKey)===t.tenantId&&a.push(e)}),a.length>0?t.provider.removeEvents(a).then(function(e){}).catch(function(e){}):Pa.resolve()})},function(){return{iKeyConfig:t,events:n}})}function l(e){var t=new pi;return t.initialize(e)||(t=null),t}function u(e,t){var n=new vi(e);return n.initialize(t)||(n=null),n}o(),e.initialize=function(a,o,s,f){Ft(o,function(){return"LocalStorageChannel.initialize"},function(){n||(t.initialize(a,o,s),t.setInitialized(!1),n=!0,i=new Ba("LocalStorage",o.logger)),function(t,n,a,i){var o=e.identifier,s=t.extensionConfig=t.extensionConfig||[],f=s[o]=s[o]||{};f.providers||(f.providers=[ja.LocalStorage,ja.IndexedDb]);var p=function(t,n,a,i){t&&(t.extensionConfig=t.extensionConfig||[]),!i&&n&&(i=n.getProcessTelContext().getNext());var r=null,o=e._getTelCtx().getNext();return o&&(r=o.getPlugin()),new ln(i,t,n,r)}(t,n,0,i),m={itemCtx:p,storageConfig:f,id:e.id},_=function(e){for(var t=e.storageConfig.providers,n=null,a=0;!n&&a<t.length&&a<5;)switch(t[a++]){case ja.LocalStorage:n=u("localStorage",e);break;case ja.SessionStorage:n=u("sessionStorage",e);break;case ja.IndexedDb:n=l(e)}return n}(m);if(_){var h={iKey:t.instrumentationKey,tenantId:Sa(t.instrumentationKey)||t.instrumentationKey,minPersistenceCacheLevel:1,coreRootCtx:p,providerContext:m,provider:_};yi(f.minPersistenceLevel||-1)&&(h.minPersistenceCacheLevel=f.minPersistenceLevel),r.push(h),n.addNotificationListener({eventsSent:function(e){d(h,e)},eventsDiscarded:function(e,t){d(h,e)}}),c(h)}}(a,o,0,f)},function(){return{coreConfig:a,core:o,extensions:s,pluginChain:f}})},e.processTelemetry=function(t,i){var o,c,d=t;if(n&&!a){i=e._getTelCtx(i),wa(t,e.identifier);var l=null;Ae(r,function(e){e.iKey===t.iKey&&(l=e)});var u=l?l.provider:null;if(d.sync||!u)return void e.processNext(d,i);d.id=d.id||_a(),Va(d.persistence)||(d.persistence=1),o=l,!((c=d).sync||c.persistence<o.minPersistenceCacheLevel)&&s("processTelemetry",function(e){return u.addEvent(d.id,d,i)})}e.processNext(d,i)},e.pause=function(){a=!0},e.resume=function(){Ft(e.core,function(){return"LocalStorageChannel:resume"},function(){a=!1,Ae(r,function(e){e.provider&&c(e)})})},e._doTeardown=function(e,t){Ae(r,function(e){var t=e.provider;t&&t.teardown()}),o()},e.flush=function(e,t){void 0===e&&(e=!0)}}),n}return C(t,e),t.__ieDyn=1,t}(kn);const Di=Si;function Ii(e){var t={};return ye(e,function(e,n){t[e]=n[1],t[n[0]]=n[1]}),Fe(t)}var xi,Ci=(xi={},ye({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},function(e,t){xi[e]=t,xi[t]=e}),Fe(xi)),Oi="REAL_TIME",wi="",Ei="POST",Ai="drop",Li="requeue",ki="application/x-json-stream",Mi="content-type",Pi="client-version",Ti="client-id",Ui="time-delta-to-apply-millis",Fi="upload-time",Hi="apikey",Ri="AuthMsaDeviceTicket",Ni="AuthXToken";function Bi(e){var t=(e.ext||{}).intweb;return t&&ya(t.msfpc)?t.msfpc:null}function ji(e){for(var t=null,n=0;null===t&&n<e.length;n++)t=Bi(e[n]);return t}var Vi=function(){function e(t,n){var a=n?[].concat(n):[],i=this,r=ji(a);i.iKey=function(){return t},i.Msfpc=function(){return r||wi},i.count=function(){return a.length},i.events=function(){return a},i.addEvent=function(e){return!!e&&(a.push(e),r||(r=Bi(e)),!0)},i.split=function(n,i){var o;if(n<a.length){var s=a.length-n;_e(i)||(s=i<s?i:s),o=a.splice(n,s),r=ji(a)}return new e(t,o)}}return e.create=function(t,n){return new e(t,n)},e}();const zi=function(){function e(){var t=!0,n=!0,a=!0,i="use-collector-delta",r=!1;Y(e,this,function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){a&&(a=!1,r||(t=!1))},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return i},e.setClockSkew=function(e){r||(e?(i=e,n=!0,r=!0):n=!1,t=!0)}})}return e.__ieDyn=1,e}();var Gi=function(){function e(){var t={};Y(e,this,function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{var a=function(e){var t=[];return e&&Ae(e,function(e){t.push(ke(e))}),t}(e.split(","));if("this-request-only"===n)return a;for(var i=1e3*parseInt(n,10),r=0;r<a.length;++r)t[a[r]]=Re()+i}catch(e){return[]}return[]},e.isTenantKilled=function(e){var n=t,a=ke(e);return void 0!==n[a]&&n[a]>Re()||(delete n[a],!1)}})}return e.__ieDyn=1,e}();const Ki=Gi;function Wi(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var qi,Qi=2e6,Yi=Math.min(Qi,65e3),Ji=/\./,Xi=function(){function e(t,n,a,i){var r="baseData",o=!!i,s=n,c={};Y(e,this,function(e){function n(e,t,i,r,d,l,u){ye(e,function(e,f){var p=null;if(f||ya(f)){var m=i,_=e,h=d,b=t;if(o&&!r&&Ji.test(e)){var v=e.split("."),y=v.length;if(y>1){h&&(h=h.slice());for(var S=0;S<y-1;S++){var D=v[S];b=b[D]=b[D]||{},m+="."+D,h&&h.push(D)}_=v[y-1]}}var I=r&&function(e,t){var n=c[e];return void 0===n&&(e.length>=7&&(n=Se(e,"ext.metadata")||Se(e,"ext.web")),c[e]=n),n}(m);if(p=!I&&s&&s.handleField(m,_)?s.value(m,_,f,a):function(e,t,n){if(!t&&!ya(t)||"string"!=typeof e)return null;var a,i=typeof t;if("string"===i||"number"===i||"boolean"===i||Ie(t))t={value:t};else if("object"!==i||g.call(t,"value")){if(_e(t.value)||t.value===zn||!xe(t.value)&&!Ce(t.value)&&!Oe(t.value)&&!Ie(t.value))return null}else t={value:n?JSON.stringify(t):t};if(Ie(t.value)&&!(t.value.length>0))return null;if(!_e(t.kind)){if(Ie(t.value)||!(0===(a=t.kind)||a>0&&a<=13||32===a))return null;t.value=t.value.toString()}return t}(_,f,a)){var x=p.value;if(b[_]=x,l&&l(h,_,p),u&&"object"==typeof x&&!Ie(x)){var C=h;C&&(C=C.slice()).push(_),n(f,x,m+"."+_,r,C,l,u)}}}})}e.createPayload=function(e,t,n,a,i,r){return{apiKeys:[],payloadBlob:wi,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:a,sendType:r,sendReason:i}},e.appendPayload=function(n,a,i){var r=n&&a&&!n.overflow;return r&&Ft(t,function(){return"Serializer:appendPayload"},function(){for(var t=a.events(),r=n.payloadBlob,o=n.numEvents,s=!1,c=[],d=[],l=n.isBeacon,u=l?65e3:3984588,f=l?Yi:Qi,p=0,m=0;p<t.length;){var _=t[p];if(_){if(o>=i){n.overflow=a.split(p);break}var h=e.getEventBlob(_);if(h&&h.length<=f){var b=h.length;if(r.length+b>u){n.overflow=a.split(p);break}r&&(r+="\n"),r+=h,++m>20&&(r.substr(0,1),m=0),s=!0,o++}else h?c.push(_):d.push(_),t.splice(p,1),p--}p++}if(c&&c.length>0&&n.sizeExceed.push(Vi.create(a.iKey(),c)),d&&d.length>0&&n.failedEvts.push(Vi.create(a.iKey(),d)),s){n.batches.push(a),n.payloadBlob=r,n.numEvents=o;var g=a.iKey();-1===Le(n.apiKeys,g)&&n.apiKeys.push(g)}},function(){return{payload:n,theBatch:{iKey:a.iKey(),evts:a.events()},max:i}}),r},e.getEventBlob=function(e){try{return Ft(t,function(){return"Serializer.getEventBlob"},function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+Sa(e.iKey);var a={},i=e.ext;i&&(t.ext=a,ye(i,function(e,t){n(t,a[e]={},"ext."+e,!0,null,null,!0)}));var o=t.data={};o.baseType=e.baseType;var s=o.baseData={};return n(e.baseData,s,r,!1,[r],function(e,t,n){Zi(a,e,t,n)},!0),n(e.data,o,"data",!1,[],function(e,t,n){Zi(a,e,t,n)},!0),JSON.stringify(t)},function(){return{item:e}})}catch(e){return null}}})}return e.__ieDyn=1,e}();function Zi(e,t,n,a){if(a&&e){var i=Da(a.value,a.kind,a.propertyType);if(i>-1){var r=e.metadata;r||(r=e.metadata={f:{}});var o=r.f;if(o||(o=r.f={}),t)for(var s=0;s<t.length;s++){var c=t[s];o[c]||(o[c]={f:{}});var d=o[c].f;d||(d=o[c].f={}),o=d}o=o[n]={},Ie(a.value)?o.a={t:i}:o.t=i}}}var $i="&NoResponseBody=true",er=((qi={})[1]=Li,qi[100]=Li,qi[200]="sent",qi[8004]=Ai,qi[8003]=Ai,qi),tr={},nr={};function ar(e,t,n){tr[e]=t,!1!==n&&(nr[t]=e)}function ir(e){try{return e.responseText}catch(e){}return wi}function rr(e,t){var n,a,i=!1;if(e&&t){var r=Te(e);if(r&&r.length>0)for(var o=t.toLowerCase(),s=0;s<r.length;s++){var c=r[s];if(c&&(a=c,(n=t)&&g.call(n,a))&&c.toLowerCase()===o){i=!0;break}}}return i}function or(e,t,n,a){t&&n&&n.length>0&&(a&&tr[t]?(e.hdrs[tr[t]]=n,e.useHdrs=!0):e.url+="&"+t+"="+n)}function sr(e,t){return t&&(Ce(t)?e=[t].concat(e):Ie(t)&&(e=t.concat(e))),e}ar(Ri,Ri,!1),ar(Pi,Pi),ar(Ti,"Client-Id"),ar(Hi,Hi),ar(Ui,Ui),ar(Fi,Fi),ar(Ni,Ni);var cr=function(){function e(t,n,a,i,r){this._responseHandlers=[];var o,s,c,d,l,u,p,m,_,h,b="?cors=true&"+Mi.toLowerCase()+"="+ki,g=new Ki,v=!1,y=new zi,S=!1,D=0,I=!0,x=[],C={},O=[],w=null,E=!1,A=!1,L=!1;Y(e,this,function(e){var k=!0;function M(e,t){for(var n=0,a=null,i=0;null==a&&i<e.length;)1===(n=e[i])?(null===et&&(et=typeof XDomainRequest!==f)&&gt()&&(et=et&&!nt(at(Xe),"withCredentials")),et?a=P:gt()&&(a=U)):2===n&&bt(t)&&(!t||t&&!m)?a=T:S&&3===n&&ht()&&(a=H),i++;return a?{_transport:n,_isSync:t,sendPOST:a}:null}function P(e,t,n){var a=new XDomainRequest;a.open(Ei,e.urlString),e.timeout&&(a.timeout=e.timeout),a.onload=function(){var e=ir(a);F(t,200,{},e),Q(e)},a.onerror=function(){F(t,400,{})},a.ontimeout=function(){F(t,500,{})},a.onprogress=function(){},n?a.send(e.data):r.set(function(){a.send(e.data)},0)}function T(e,t,n){var a,i=e.urlString,o=!1,s=!1,c=((a={body:e.data,method:Ei}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,a);n&&(c.keepalive=!0,2===e._sendReason&&(o=!0,h&&(i+=$i))),k&&(c.credentials="include"),e.headers&&Te(e.headers).length>0&&(c.headers=e.headers),fetch(i,c).then(function(e){var n={},a=wi,i=e.headers;i&&i.forEach(function(e,t){n[t]=e}),e.body&&e.text().then(function(e){a=e}),s||(s=!0,F(t,e.status,n,a),Q(a))}).catch(function(e){s||(s=!0,F(t,0,{}))}),o&&!s&&(s=!0,F(t,200,{})),!s&&e.timeout>0&&r.set(function(){s||(s=!0,F(t,500,{}))},e.timeout)}function U(e,t,n){var a=e.urlString;function i(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var a=t.getResponseHeader(n);a&&(e[n]=ke(a))}return e}function r(e,n){F(t,e.status,function(e){var t,n,a={};return e.getAllResponseHeaders?(t=e.getAllResponseHeaders(),n={},xe(t)&&Ae(ke(t).split(/[\r\n]+/),function(e){if(e){var t=e.indexOf(": ");if(-1!==t){var a=ke(e.substring(0,t)).toLowerCase(),i=ke(e.substring(t+1));n[a]=i}else n[ke(e)]=1}}),a=n):(a=i(a,e,"time-delta-millis"),a=i(a,e,"kill-duration"),a=i(a,e,"kill-duration-seconds")),a}(e),n)}n&&e.disableXhrSync&&(n=!1);var o=function(e,t,n,a,i,r){function o(e,t,n){try{e[t]=n}catch(e){}}void 0===a&&(a=!1),void 0===i&&(i=!1);var s=new XMLHttpRequest;return a&&o(s,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",a),n&&o(s,ga,n),s.open("POST",t,!i),n&&o(s,ga,n),!i&&r&&o(s,"timeout",r),s}(0,a,k,!0,n,e.timeout);ye(e.headers,function(e,t){o.setRequestHeader(e,t)}),o.onload=function(){var e=ir(o);r(o,e),Q(e)},o.onerror=function(){r(o)},o.ontimeout=function(){r(o)},o.send(e.data)}function F(e,t,n,a){try{e(t,n,a)}catch(e){kt(s,2,518,_t(e))}}function H(e,t,n){var a=200,i=e._thePayload,r=e.urlString+(h?$i:wi);try{var o=dt();if(!o.sendBeacon(r,e.data))if(i){var c=[];Ae(i.batches,function(e){if(c&&e&&e.count()>0){for(var t=e.events(),n=0;n<t.length;n++)if(!o.sendBeacon(r,w.getEventBlob(t[n]))){c.push(e.split(n));break}}else c.push(e.split(0))}),Y(c,8003,i.sendType,!0)}else a=0}catch(e){Mt(s,"Failed to send telemetry using sendBeacon API. Ex:"+_t(e)),a=0}finally{F(t,a,{},wi)}}function R(e){return 2===e||3===e}function N(e){return A&&R(e)&&(e=2),e}function B(){return!v&&D<n}function j(){var e=O;return O=[],e}function V(e,t,n){var a=!1;return e&&e.length>0&&!v&&c[t]&&w&&(a=0!==t||B()&&(n>0||y.allowRequestSending())),a}function z(e){var t={};return e&&Ae(e,function(e,n){t[n]={iKey:e.iKey(),evts:e.events()}}),t}function G(e,n,a,i,r){if(e&&0!==e.length)if(v)Y(e,1,i);else{i=N(i);try{var o=e,l=0!==i;Ft(d,function(){return"HttpManager:_sendBatches"},function(o){o&&(e=e.slice(0));for(var s=[],d=null,u=Oa(),f=c[i]||(l?c[1]:c[0]),p=f&&f._transport,m=_&&(A||R(i)||3===p||f._isSync&&2===p);V(e,i,n);){var h=e.shift();h&&h.count()>0&&(g.isTenantKilled(h.iKey())?s.push(h):(d=d||w.createPayload(n,a,l,m,r,i),w.appendPayload(d,h,t)?null!==d.overflow&&(e=[d.overflow].concat(e),d.overflow=null,W(d,u,Oa(),r),u=Oa(),d=null):(W(d,u,Oa(),r),u=Oa(),e=[h].concat(e),d=null)))}d&&W(d,u,Oa(),r),e.length>0&&(O=e.concat(O)),Y(s,8004,i)},function(){return{batches:z(o),retryCount:n,isTeardown:a,isSynchronous:l,sendReason:r,useSendBeacon:R(i),sendType:i}},!l)}catch(e){kt(s,2,48,"Unexpected Exception sending batch: "+_t(e))}}}function K(e,t,n){e[t]=e[t]||{},e[t][o.identifier]=n}function W(t,n,i,r){if(t&&t.payloadBlob&&t.payloadBlob.length>0){var l=!!e.sendHook,_=c[t.sendType];!R(t.sendType)&&t.isBeacon&&2===t.sendReason&&(_=c[2]||c[3]||_);var h=L;(t.isBeacon||3===_._transport)&&(h=!1);var v=function(e,t){var n={url:b,hdrs:{},useHdrs:!1};t?(n.hdrs=Ca(n.hdrs,C),n.useHdrs=Te(n.hdrs).length>0):ye(C,function(e,t){nr[e]?or(n,nr[e],t,!1):(n.hdrs[e]=t,n.useHdrs=!0)}),or(n,Ti,"NO_AUTH",t),or(n,Pi,ba,t);var a=wi;Ae(e.apiKeys,function(e){a.length>0&&(a+=","),a+=e}),or(n,Hi,a,t),or(n,Fi,Re().toString(),t);var i=function(e){for(var t=0;t<e.batches.length;t++){var n=e.batches[t].Msfpc();if(n)return encodeURIComponent(n)}return wi}(e);if(ya(i)&&(n.url+="&ext.intweb.msfpc="+i),y.shouldAddClockSkewHeaders()&&or(n,Ui,y.getClockSkewHeaderValue(),t),d.getWParam){var r=d.getWParam();r>=0&&(n.url+="&w="+r)}for(var o=0;o<x.length;o++)n.url+="&"+x[o].name+"="+x[o].value;return n}(t,h);h=h||v.useHdrs;var S=Oa();Ft(d,function(){return"HttpManager:_doPayloadSend"},function(){for(var c=0;c<t.batches.length;c++)for(var b=t.batches[c].events(),x=0;x<b.length;x++){var C=b[x];if(E){var O=C.timings=C.timings||{};K(O,"sendEventStart",S),K(O,"serializationStart",n),K(O,"serializationCompleted",i)}C.sendAttempt>0?C.sendAttempt++:C.sendAttempt=1}Y(t.batches,1e3+(r||0),t.sendType,!0);var w={data:t.payloadBlob,urlString:v.url,headers:v.hdrs,_thePayload:t,_sendReason:r,timeout:u,disableXhrSync:p,disableFetchKeepAlive:m};h&&(rr(w.headers,"cache-control")||(w.headers["cache-control"]="no-cache, no-store"),rr(w.headers,Mi)||(w.headers["content-type"]=ki));var L=null;_&&(L=function(n){y.firstRequestSent();var i=function(n,i){!function(t,n,i,r){var s,c=9e3,d=null,l=!1,u=!1;try{var p=!0;if(typeof t!==f){if(n){y.setClockSkew(n["time-delta-millis"]);var m=n["kill-duration"]||n["kill-duration-seconds"];Ae(g.setKillSwitchTenants(n["kill-tokens"],m),function(e){Ae(i.batches,function(t){if(t.iKey()===e){d=d||[];var n=t.split(0);i.numEvents-=n.count(),d.push(n)}})})}if(200==t||204==t)return void(c=200);((s=t)>=300&&s<500&&408!=s&&429!=s||501==s||505==s||i.numEvents<=0)&&(p=!1),c=9e3+t%1e3}if(p){c=100;var _=i.retryCnt;0===i.sendType&&(_<a?(l=!0,q(function(){0===i.sendType&&D--,G(i.batches,_+1,i.isTeardown,A?2:i.sendType,5)},A,Wi(_))):(u=!0,A&&(c=8001)))}}finally{l||(y.setClockSkew(),function(t,n,a,i){try{i&&o._backOffTransmission(),200===n&&(i||t.isSync||o._clearBackOff(),function(e){if(E){var t=Oa();Ae(e,function(e){e&&e.count()>0&&function(e,t){E&&Ae(e,function(e){K(e.timings=e.timings||{},"sendEventCompleted",t)})}(e.events(),t)})}}(t.batches)),Y(t.batches,n,t.sendType,!0)}finally{0===t.sendType&&(D--,5!==a&&e.sendQueuedRequests(t.sendType,a))}}(i,c,r,u)),Y(d,8004,i.sendType)}}(n,i,t,r)},c=t.isTeardown||t.isSync;try{_.sendPOST(n,i,c),e.sendListener&&e.sendListener(w,n,c,t.isBeacon)}catch(e){Mt(s,"Unexpected exception sending payload. Ex:"+_t(e)),F(i,0,{})}}),Ft(d,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(L)if(0===t.sendType&&D++,l&&!t.isBeacon&&3!==_._transport){var n={data:w.data,urlString:w.urlString,headers:Ca({},w.headers),timeout:w.timeout,disableXhrSync:w.disableXhrSync,disableFetchKeepAlive:w.disableFetchKeepAlive},a=!1;Ft(d,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{e.sendHook(n,function(e){a=!0,I||e._thePayload||(e._thePayload=e._thePayload||w._thePayload,e._sendReason=e._sendReason||w._sendReason),L(e)},t.isSync||t.isTeardown)}catch(e){a||L(w)}})}else L(w)})},function(){return{thePayload:t,serializationStart:n,serializationCompleted:i,sendReason:r}},t.isSync)}t.sizeExceed&&t.sizeExceed.length>0&&Y(t.sizeExceed,8003,t.sendType),t.failedEvts&&t.failedEvts.length>0&&Y(t.failedEvts,8002,t.sendType)}function q(e,t,n){t?e():r.set(e,n)}function Q(t){var n=e._responseHandlers;try{for(var a=0;a<n.length;a++)try{n[a](t)}catch(e){kt(s,1,519,"Response handler failed: "+e)}if(t){var i=JSON.parse(t);ya(i.webResult)&&ya(i.webResult.msfpc)&&l.set("MSFPC",i.webResult.msfpc,31536e3)}}catch(e){}}function Y(e,t,n,a){if(e&&e.length>0&&i){var r=i[(c=t,l=er[c],ya(l)||(l="oth",c>=9e3&&c<=9999?l="rspFail":c>=8e3&&c<=8999?l=Ai:c>=1e3&&c<=1999&&(l="send")),l)];if(r){var o=0!==n;Ft(d,function(){return"HttpManager:_sendBatchesNotification"},function(){q(function(){try{r.call(i,e,t,o,n)}catch(e){kt(s,1,74,"send request notification failed: "+e)}},a||o,0)},function(){return{batches:z(e),reason:t,isSync:o,sendSync:a,sendType:n}},!o)}}var c,l}e.initialize=function(e,t,n,a,i){var r;i||(i={}),b=e+b,L=!!me(i.avoidOptions)||!i.avoidOptions,d=t,l=t.getCookieMgr(),E=!d.config.disableEventTimings;var f=!!d.config.enableCompoundKey;s=(o=n).diagLog();var g=i.valueSanitizer,v=i.stringifyObjects;me(i.enableCompoundKey)||(f=!!i.enableCompoundKey),u=i.xhrTimeout,p=!!i.disableXhrSync,m=!!i.disableFetchKeepAlive,h=!1!==i.addNoResponse,S=!pt(),w=new Xi(d,g,v,f),_e(i.useSendBeacon)||(S=!!i.useSendBeacon);var y=a,D=i.alwaysUseXhrOverride?a:null,x=i.alwaysUseXhrOverride?a:null,C=[3,2];if(!a){I=!1;var O=lt();O&&O.protocol&&"file:"===O.protocol.toLowerCase()&&(k=!1);var A=[];pt()?(A=[2,1],C=[2,1,3]):A=[1,2,3],(a=M(A=sr(A,i.transports),!1))||Mt(s,"No available transport to send events"),y=M(A,!0)}D||(D=M(C=sr(C,i.unloadTransports),!0)),_=!I&&(S&&ht()||!m&&bt(!0)),(r={})[0]=a,r[1]=y||M([1,2,3],!0),r[2]=D||y||M([1],!0),r[3]=x||M([2,3],!0)||y||M([1],!0),c=r},e._getDbgPlgTargets=function(){return[c[0],g,w,c]},e.addQueryStringParameter=function(e,t){for(var n=0;n<x.length;n++)if(x[n].name===e)return void(x[n].value=t);x.push({name:e,value:t})},e.addHeader=function(e,t){C[e]=t},e.canSendRequest=function(){return B()&&y.allowRequestSending()},e.sendQueuedRequests=function(e,t){me(e)&&(e=0),A&&(e=N(e),t=2),V(O,e,0)&&G(j(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!v&&0===D&&0===O.length},e.setUnloading=function(e){A=e},e.addBatch=function(e){if(e&&e.count()>0){if(g.isTenantKilled(e.iKey()))return!1;O.push(e)}return!0},e.teardown=function(){O.length>0&&G(j(),0,!0,2,2)},e.pause=function(){v=!0},e.resume=function(){v=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,t,n){e&&e.count()>0&&(_e(t)&&(t=1),A&&(t=N(t),n=2),G([e],0,!1,t,n||0))}})}return e.__ieDyn=1,e}();function dr(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return setTimeout(e,t,n)}function lr(e){clearTimeout(e)}function ur(e,t){return{set:e||dr,clear:t||lr}}var fr="eventsDiscarded",pr=function(e){function t(){var n,a=e.call(this)||this;a.identifier="PostChannel",a.priority=1011,a.version="3.2.15";var i,r,o,s,c,d,l,u=!1,f=[],p=null,m=!1,_=0,h=500,b=0,g=1e4,v={},y=Oi,S=null,D=null,I=0,x=0,C={},O=-1,w=!0,E=!1,A=6,L=2;return Y(t,a,function(e,t){function a(e){"beforeunload"!==(e||rt().event).type&&(E=!0,r.setUnloading(E)),N(2,2)}function k(e){E=!1,r.setUnloading(E)}function M(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext.trace&&delete e.ext.trace,e.ext&&e.ext.user&&e.ext.user.id&&delete e.ext.user.id,w&&(e.ext=qe(e.ext),e.baseData&&(e.baseData=qe(e.baseData)),e.data&&(e.data=qe(e.data))),e.sync)if(I||m)e.latency=3,e.sync=!1;else if(r)return w&&(e=qe(e)),void r.sendSynchronousBatch(Vi.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var n=e.latency,a=b,i=g;4===n&&(a=_,i=h);var o=!1;if(a<i)o=!V(e,t);else{var s=1,c=20;4===n&&(s=4,c=1),o=!0,function(e,t,n,a){for(;n<=t;){var i=B(e,t,!0);if(i&&i.count()>0){var r=i.split(0,a),o=r.count();if(o>0)return 4===n?_-=o:b-=o,X(fr,[r],Ci.QueueFull),!0}n++}return z(),!1}(e.iKey,e.latency,s,c)&&(o=!V(e,t))}o&&J(fr,[e],Ci.QueueFull)}function P(e,t,n){var a=G(e,t,n);return r.sendQueuedRequests(t,n),a}function T(){return b>0}function U(){if(O>=0&&G(O,0,c)&&r.sendQueuedRequests(0,c),_>0&&!D&&!m){var e=v[y][2];e>=0&&(D=H(function(){D=null,P(4,0,1),U()},e))}var t=v[y][1];!S&&!p&&t>=0&&!m&&(T()?S=H(function(){S=null,P(0===x?3:1,0,1),x++,x%=2,U()},t):x=0)}function F(){n=null,u=!1,f=[],p=null,m=!1,_=0,h=500,b=0,g=1e4,v={},y=Oi,S=null,D=null,I=0,x=0,i=null,C={},o=void 0,s=0,O=-1,c=null,w=!0,E=!1,A=6,L=2,d=null,l=ur(),r=new cr(500,2,1,{requeue:Q,send:Z,sent:$,drop:ee,rspFail:te,oth:ne},l),q(),C[4]={batches:[],iKeyMap:{}},C[3]={batches:[],iKeyMap:{}},C[2]={batches:[],iKeyMap:{}},C[1]={batches:[],iKeyMap:{}},ae()}function H(e,t){0===t&&I&&(t=1);var n=1e3;return I&&(n=Wi(I-1)),l.set(e,t*n)}function R(){return null!==S&&(l.clear(S),S=null,x=0,!0)}function N(e,t){R(),p&&(l.clear(p),p=null),m||P(1,e,t)}function B(e,t,n){var a=C[t];a||(a=C[t=1]);var i=a.iKeyMap[e];return!i&&n&&(i=Vi.create(e),a.batches.push(i),a.iKeyMap[e]=i),i}function j(t,n){r.canSendRequest()&&!I&&(o>0&&b>o&&(n=!0),n&&null==p&&e.flush(t,null,20))}function V(e,t){w&&(e=qe(e));var n=e.latency,a=B(e.iKey,n,!0);return!!a.addEvent(e)&&(4!==n?(b++,t&&0===e.sendAttempt&&j(!e.sync,s>0&&a.count()>=s)):_++,!0)}function z(){for(var e=0,t=0,n=function(n){var a=C[n];a&&a.batches&&Ae(a.batches,function(a){4===n?e+=a.count():t+=a.count()})},a=1;a<=4;a++)n(a);b=t,_=e}function G(t,n,a){var i=!1,o=0===n;return!o||r.canSendRequest()?Ft(e.core,function(){return"PostChannel._queueBatches"},function(){for(var e=[],n=4;n>=t;){var a=C[n];a&&a.batches&&a.batches.length>0&&(Ae(a.batches,function(t){r.addBatch(t)?i=i||t&&t.count()>0:e=e.concat(t.events()),4===n?_-=t.count():b-=t.count()}),a.batches=[],a.iKeyMap={}),n--}e.length>0&&J(fr,e,Ci.KillSwitch),i&&O>=t&&(O=-1,c=0)},function(){return{latency:t,sendType:n,sendReason:a}},!o):(O=O>=0?Math.min(O,t):t,c=Math.max(c,a)),i}function K(e,t){P(1,0,t),z(),W(function(){e&&e(),f.length>0?p=H(function(){p=null,K(f.shift(),t)},0):(p=null,U())})}function W(e){r.isCompletelyIdle()?e():p=H(function(){p=null,W(e)},.25)}function q(){(v={}).REAL_TIME=[2,1,0],v.NEAR_REAL_TIME=[6,3,0],v.BEST_EFFORT=[18,9,0]}function Q(t,n){var a=[],i=A;E&&(i=L),Ae(t,function(t){t&&t.count()>0&&Ae(t.events(),function(t){t&&(t.sync&&(t.latency=4,t.sync=!1),t.sendAttempt<i?(wa(t,e.identifier),M(t,!1)):a.push(t))})}),a.length>0&&J(fr,a,Ci.NonRetryableStatus),E&&N(2,2)}function Y(t,n){var a=e._notificationManager||{},i=a[t];if(i)try{i.apply(a,n)}catch(n){kt(e.diagLog(),1,74,t+" notification failed: "+n)}}function J(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];t&&t.length>0&&Y(e,[t].concat(n))}function X(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];t&&t.length>0&&Ae(t,function(t){t&&t.count()>0&&Y(e,[t.events()].concat(n))})}function Z(e,t,n){e&&e.length>0&&Y("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function $(e,t){X("eventsSent",e,t),U()}function ee(e,t){X(fr,e,t>=8e3&&t<=8999?t-8e3:Ci.Unknown)}function te(e){X(fr,e,Ci.NonRetryableStatus),U()}function ne(e,t){X(fr,e,Ci.Unknown),U()}function ae(){s=n&&n.disableAutoBatchFlushLimit?0:Math.max(1500,g/6)}F(),e._getDbgPlgTargets=function(){return[r]},e.initialize=function(s,c,u){Ft(c,function(){return"PostChannel:initialize"},function(){var f,p,m,_,b=c;t.initialize(s,c,u);try{c.addUnloadCb,d=ca(Qt(e.identifier),c.evtNamespace&&c.evtNamespace());var v=e._getTelCtx();s.extensionConfig[e.identifier]=s.extensionConfig[e.identifier]||{},n=v.getExtCfg(e.identifier),l=ur(n.setTimeoutOverride,n.clearTimeoutOverride),w=!n.disableOptimizeObj&&!!at("chrome"),function(e){var t=e.getWParam;e.getWParam=function(){var e=0;return n.ignoreMc1Ms0CookieProcessing&&(e|=2),e|t()}}(b),n.eventsLimitInMem>0&&(g=n.eventsLimitInMem),n.immediateEventLimit>0&&(h=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(o=n.autoFlushEventsLimit),Ce(n.maxEventRetryAttempts)&&(A=n.maxEventRetryAttempts),Ce(n.maxUnloadEventRetryAttempts)&&(L=n.maxUnloadEventRetryAttempts),ae(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(i=n.httpXHROverride),ya(s.anonCookieName)&&r.addQueryStringParameter("anoncknm",s.anonCookieName),r.sendHook=n.payloadPreprocessor,r.sendListener=n.payloadListener;var y=n.overrideEndpointUrl?n.overrideEndpointUrl:s.endpointUrl;e._notificationManager=c.getNotifyMgr(),r.initialize(y,e.core,e,i,n);var S=s.disablePageUnloadEvents||[];f=[Yn,Qn,Wn],m=S,_=d,(p=a)&&f&&Ie(f)&&!ua(f,p,m,_)&&m&&m.length>0&&ua(f,p,null,_),pa(a,S,d),ma(k,s.disablePageShowEvents,d)}catch(t){throw e.setInitialized(!1),t}},function(){return{coreConfig:s,core:c,extensions:u}})},e.processTelemetry=function(t,a){wa(t,e.identifier);var i=(a=e._getTelCtx(a)).getExtCfg(e.identifier),r=!!n.disableTelemetry;i&&(r=r||!!i.disableTelemetry);var o=t;r||u||(n.overrideInstrumentationKey&&(o.iKey=n.overrideInstrumentationKey),i&&i.overrideInstrumentationKey&&(o.iKey=i.overrideInstrumentationKey),M(o,!0),E?N(2,2):U()),e.processNext(o,a)},e._doTeardown=function(e,t){var n;N(2,2),u=!0,r.teardown(),fa([Yn,Qn,Wn],null,d),n=ca(Jn,d),fa([Wn],null,n),fa([Kn],null,n),function(e,t){var n=ca(Xn,t);fa([qn],null,n),fa([Kn],null,n)}(0,d),F()},e.setEventQueueLimits=function(e,t){g=e>0?e:1e4,o=t>0?t:0,ae();var n=b>e;if(!n&&s>0)for(var a=1;!n&&a<=3;a++){var i=C[a];i&&i.batches&&Ae(i.batches,function(e){e&&e.count()>=s&&(n=!0)})}j(!0,n)},e.pause=function(){R(),m=!0,r.pause()},e.resume=function(){m=!1,r.resume(),U()},e.addResponseHandler=function(e){r._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){R(),q(),y=Oi,U(),ye(e,function(e,t){var n=t.length;if(n>=2){var a=n>2?t[2]:0;if(t.splice(0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}a>=0&&t[1]>=0&&a>t[1]&&(a=t[1]),t.push(a),v[e]=t}})},e.flush=function(e,t,n){if(void 0===e&&(e=!0),!m)if(n=n||1,e)null==p?(R(),G(1,0,n),p=H(function(){p=null,K(t,n)},0)):f.push(t);else{var a=R();P(1,1,n),null!=t&&t(),a&&U()}},e.setMsaAuthTicket=function(e){r.addHeader(Ri,e)},e.hasEvents=T,e._setTransmitProfile=function(e){y!==e&&void 0!==v[e]&&(R(),y=e,U())},e._backOffTransmission=function(){I<4&&(I++,R(),U())},e._clearBackOff=function(){I&&(I=0,R(),U())},Ue(e,"_setTimeoutOverride",function(){return l.set},function(e){l=ur(e,l.clear)}),Ue(e,"_clearTimeoutOverride",function(){return l.clear},function(e){l=ur(l.set,e)})}),a}return C(t,e),t.__ieDyn=1,t}(kn);const mr=pr;var _r,hr="locale",br="ver",gr="name",vr=Ii({UserExt:[0,"user"],DeviceExt:[1,"device"],TraceExt:[2,"trace"],WebExt:[3,"web"],AppExt:[4,"app"],OSExt:[5,"os"],SdkExt:[6,"sdk"],IntWebExt:[7,"intweb"],UtcExt:[8,"utc"],LocExt:[9,"loc"],CloudExt:[10,"cloud"],DtExt:[11,"dt"]}),yr=Ii({id:[0,"id"],ver:[1,br],appName:[2,gr],locale:[3,hr],expId:[4,"expId"],env:[5,"env"]}),Sr=Ii({domain:[0,"domain"],browser:[1,"browser"],browserVer:[2,"browserVer"],screenRes:[3,"screenRes"],userConsent:[4,"userConsent"],consentDetails:[5,"consentDetails"]}),Dr=Ii({locale:[0,hr],localId:[1,"localId"],id:[2,"id"]}),Ir=Ii({osName:[0,gr],ver:[1,br]}),xr=Ii({ver:[0,br],seq:[1,"seq"],installId:[2,"installId"],epoch:[3,"epoch"]}),Cr=Ii({msfpc:[0,"msfpc"],anid:[1,"anid"],serviceName:[2,"serviceName"]}),Or=Ii({popSample:[0,"popSample"],eventFlags:[1,"eventFlags"]}),wr=Ii({tz:[0,"tz"]}),Er=Ii({sessionId:[0,"sesId"]}),Ar=Ii({localId:[0,"localId"],deviceClass:[1,"deviceClass"],make:[2,"make"],model:[3,"model"]}),Lr=Ii({role:[0,"role"],roleInstance:[1,"roleInstance"],roleVer:[2,"roleVer"]}),kr=Ii({traceId:[0,"traceID"],traceName:[1,gr],parentId:[2,"parentID"]}),Mr=Ii({traceId:[0,"traceId"],spanId:[1,"spanId"],traceFlags:[2,"traceFlags"]});function Pr(){return void 0===_r&&(_r=!!Ur(0)),_r}function Tr(){return Pr()?Ur(0):null}function Ur(e){var t,n,a=null;try{var i=y();if(!i)return null;n=new Date,(a=0===e?i.localStorage:i.sessionStorage)&&ge(a.setItem)&&(a.setItem(n,n),t=a.getItem(n)!==n,a.removeItem(n),t&&(a=null))}catch(e){a=null}return a}function Fr(){return this.getId()}function Hr(e){this.setId(e)}var Rr=function(){function e(){Y(e,this,function(e){e.setId=function(t){e.customId=t},e.getId=function(){return xe(e.customId)?e.customId:e.automaticId}})}return e._staticInit=void Ue(e.prototype,"id",Fr,Hr),e}(),Nr="ai_session",Br=function(){function e(t,n){var a,i,r=Et(t),o=Dn(t);Y(e,this,function(t){var s,c={sessionRenewalMs:(s=n).sessionRenewalMs&&function(){return s.sessionRenewalMs},sessionExpirationMs:s.sessionExpirationMs&&function(){return s.sessionExpirationMs},cookieDomain:s.cookieDomain&&function(){return s.cookieDomain},namePrefix:s.namePrefix&&function(){return s.namePrefix},sessionAsGuid:function(){return s.sessionAsGuid},idLength:function(){return s.idLength?s.idLength:22}};function d(e){var n=t.automaticSession,a=e.split("|");a.length>0&&n.setId(a[0]);try{if(a.length>1){var i=+a[1];n.acquisitionDate=+new Date(i),n.acquisitionDate=n.acquisitionDate>0?n.acquisitionDate:0}if(a.length>2){var o=+a[2];n.renewalDate=+new Date(o),n.renewalDate=n.renewalDate>0?n.renewalDate:0}}catch(e){kt(r,1,510,"Error parsing ai_session cookie, session will be reset: "+e)}0===n.renewalDate&&kt(r,2,517,"AI session renewal date is 0, session will be reset.")}function l(){var e=t.automaticSession,n=(new Date).getTime(),a=t.config.sessionAsGuid();!me(a)&&a?Oe(a)?e.setId(xa()):e.setId(xa(a)):e.setId(zt(c&&c.idLength?c.idLength():22)),e.acquisitionDate=n,e.renewalDate=n,u(e.getId(),e.acquisitionDate,e.renewalDate),Pr()||kt(r,2,505,"Browser does not support local storage. Session durations will be inaccurate.")}function u(e,n,r){var s=n+t.config.sessionExpirationMs(),c=r+t.config.sessionRenewalMs(),d=new Date,l=[e,n,r];s<c?d.setTime(s):d.setTime(c);var u=t.config.cookieDomain?t.config.cookieDomain():null;o.set(i(),l.join("|")+";expires="+d.toUTCString(),null,u),a=(new Date).getTime()}ge(n.sessionExpirationMs)||(c.sessionExpirationMs=function(){return e.acquisitionSpan}),ge(n.sessionRenewalMs)||(c.sessionRenewalMs=function(){return e.renewalSpan}),t.config=c,i=function(){return t.config.namePrefix&&t.config.namePrefix()?Nr+t.config.namePrefix():Nr},t.automaticSession=new Rr,t.update=function(){t.automaticSession.getId()||function(){var e=o.get(i());if(e&&ge(e.split))d(e);else{var n=function(e,t){var n=Tr();if(null!==n)try{return n.getItem(t)}catch(t){_r=!1,kt(e,1,503,"Browser failed read of local storage. "+t)}return null}(r,i());n&&d(n)}t.automaticSession.getId()||l()}();var n=t.automaticSession,s=t.config,c=(new Date).getTime(),f=c-n.acquisitionDate>s.sessionExpirationMs(),p=c-n.renewalDate>s.sessionRenewalMs();f||p?l():(!a||c-a>e.cookieUpdateInterval)&&(n.renewalDate=c,u(n.getId(),n.acquisitionDate,n.renewalDate))},t.backup=function(){var e,n,a,o=t.automaticSession;e=o.getId(),n=o.acquisitionDate,a=o.renewalDate,function(e,t,n){var a=Tr();if(null!==a)try{a.setItem(t,n)}catch(t){_r=!1,kt(e,1,504,"Browser failed write to local storage. "+t)}}(r,i(),[e,n,a].join("|"))}})}return e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}(),jr=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"];function Vr(e,t){void 0===t&&(t=jr);var n=null;if(e)for(var a=e.split(","),i=0;i<a.length;i++)zr(a[i],t)&&(n?n+=","+a[i]:n=a[i]);return n}function zr(e,t){if(void 0===t&&(t=jr),!e||e.length<4)return!1;for(var n=!1,a=e.substring(0,3).toString().toUpperCase(),i=0;i<t.length;i++)if(t[i]+":"===a&&e.length<=256){n=!0;break}return n}function Gr(){return this.getExpId()}var Kr=function(){function e(t,n){var a=null,i=jr.slice(0),r=Dn(n),o=t;Y(e,this,function(e){if(ot()){var n=st().documentElement;n&&(e.locale=n.lang)}function s(e){e!==a&&(a=Vr(e,i))}e.env=t.env?t.env:function(e){var t,n={},a=st();if(a){t=a&&a.querySelectorAll("meta");for(var i=0;i<t.length;i++){var r=t[i];r.name&&0===r.name.toLowerCase().indexOf(e)&&(n[r.name.replace(e,"")]=r.content)}}return n}("awa-").env,e.getExpId=function(){return o.expId?(s(o.expId),a):(s(Ia(r,"Treatments")),a)}})}return e.validateAppExpId=Vr,e._staticInit=void Ue(e.prototype,"expId",Gr),e}(),Wr=function(){},qr=function(){};function Qr(){return this.getMsfpc()}function Yr(){return this.getAnid()}var Jr=function(){function e(t,n){var a=Dn(n);Y(e,this,function(e){t.serviceName&&(e.serviceName=t.serviceName),e.getMsfpc=function(){return Ia(a,"MSFPC")},e.getAnid=function(){return Ia(a,"ANON").slice(0,34)}})}var t;return e._staticInit=(Ue(t=e.prototype,"msfpc",Qr),void Ue(t,"anid",Yr)),e}(),Xr=function(){var e=(new Date).getTimezoneOffset(),t=e%60,n=(e-t)/60,a="+";n>0&&(a="-"),n=Math.abs(n),t=Math.abs(t),this.tz=a+(n<10?"0"+n:n.toString())+":"+(t<10?"0"+t:t.toString())},Zr={WIN:/(windows|win32)/i,WINRT:/ arm;/i,WINPHONE:/windows\sphone\s\d+\.\d+/i,OSX:/(macintosh|mac os x)/i,IOS:/(ipad|iphone|ipod)(?=.*like mac os x)/i,LINUX:/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,ANDROID:/android/i,CROS:/CrOS/i},$r={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},eo="Unknown",to=[{r:Zr.WINPHONE,os:"Windows Phone"},{r:Zr.WINRT,os:"Windows RT"},{r:Zr.WIN,os:"Windows"},{r:Zr.IOS,os:"iOS"},{r:Zr.ANDROID,os:"Android"},{r:Zr.LINUX,os:"Linux"},{r:Zr.CROS,os:"Chrome OS"},{s:"x11",os:"Unix"},{s:"blackberry",os:"BlackBerry"},{s:"symbian",os:"Symbian"},{s:"nokia",os:"Nokia"},{r:Zr.OSX,os:"Mac OS X"}];function no(e,t){var n=e.match(new RegExp(t+" ([\\d,.]+)"));return n?$r[n[1]]?$r[n[1]]:n[1]:eo}function ao(e){return e.indexOf(".")>-1?".":e.indexOf("_")>-1?"_":null}var io=function(e){if(e.populateOperatingSystemInfo){var t=this,n=dt()||{},a=e.userAgent||n.userAgent||"",i=e.userAgentData||n.userAgentData||{};if(a){var r=function(e){for(var t=0;t<to.length;t++){var n=to[t];if(n.r&&e.match(n.r))return n.os;if(n.s&&-1!==e.indexOf(n.s))return n.os}return eo}(a.toLowerCase());t.name=r,t.ver=function(e,t){return"Windows"===t?no(e,"Windows NT"):"Android"===t?no(e,t):"Mac OS X"===t?function(e){var t=e.match(new RegExp("Mac OS X ([\\d,_,.]+)"));if(t){var n=t[1].replace(/_/g,".");if(n){var a=ao(n);return a?n.split(a)[0]:n}}return eo}(e):"iOS"===t?function(e){var t=e.match(new RegExp("OS ([\\d,_,.]+)"));if(t){var n=t[1].replace(/_/g,".");if(n){var a=ao(n);return a?n.split(a)[0]:n}}return eo}(e):eo}(a,r)}t.name&&t.name!==eo||!xe(i.platform)||(t.name=i.platform)}},ro="MicrosoftApplicationsTelemetryDeviceId",oo=function(){function e(t,n){var a=0;Y(e,this,function(e){var i=t.propertyStorageOverride;e.seq=a,e.epoch=Vt(!1).toString();var r=Dn(n,t);if(r.isEnabled()||i){var o=function(e,t,n){return t?t.getProperty(n)||"":Ia(e,n)}(r,i,ro);o||(o=_a()),function(e,t,n,a){t?t.setProperty(n,a):e.set(n,a,31536e3)}(r,i,ro,o),e.installId=o}else r.purge(ro);e.getSequenceId=function(){return++a}})}return e.__ieDyn=1,e}(),so=function(e,t,n,a){var i=this;if(i.traceId=t||ha(),e.enableDistributedTracing&&!n&&(n=ha().substring(0,16)),i.parentId=n,e.enableApplicationInsightsTrace){i.name=a;var r=lt();r&&r.pathname&&(i.name=r.pathname)}};function co(){return this.getLocalId()}function lo(e){this.setLocalId(e)}var uo=function(){function e(t,n,a){var i,r=n,o=Dn(a,t);Y(e,this,function(n){if(o&&o.isEnabled()&&(f(),r.enableApplicationInsightsUser)){var a=Ia(o,e.userCookieName);if(a){var s=a.split(e.cookieSeparator);s.length>0&&(n.id=s[0])}if(!n.id){n.id=zt(t&&!me(t.idLength)?t.idLength:22);var c=Ee(new Date);n.accountAcquisitionDate=c;var d=[n.id,c],l=r.cookieDomain?r.cookieDomain:void 0;o.set(e.userCookieName,d.join(e.cookieSeparator),31536e3,l)}}if("undefined"!=typeof navigator){var u=navigator;n.locale=u.userLanguage||u.language}function f(){if(!r.hashIdentifiers&&!r.dropIdentifiers){var e=Ia(o,"MUID");e&&(i="t:"+e)}return i}n.getLocalId=function(){return i||f()},n.setLocalId=function(e){i=e}})}return e.cookieSeparator="|",e.userCookieName="ai_user",e._staticInit=void Ue(e.prototype,"localId",co,lo),e}(),fo=function(e){var t=this;t.popSample=100,t.eventFlags=0,e.hashIdentifiers&&(t.eventFlags=1048576|t.eventFlags),e.dropIdentifiers&&(t.eventFlags=2097152|t.eventFlags),e.scrubIpOnly&&(t.eventFlags=4194304|t.eventFlags)},po=["Required","Analytics","SocialMedia","Advertising"],mo="Unknown",_o="Edg/",ho=[{ua:"OPR/",b:"Opera"},{ua:"PhantomJS",b:"PhantomJS"},{ua:"Edge",b:"Edge"},{ua:_o,b:"Edge"},{ua:"Electron",b:"Electron"},{ua:"Chrome",b:"Chrome"},{ua:"Trident",b:"MSIE"},{ua:"MSIE ",b:"MSIE"},{ua:"Firefox",b:"Firefox"},{ua:"Safari",b:"Safari"},{ua:"SkypeShell",b:"SkypeShell"}],bo=[{br:"Microsoft Edge",b:"Edge"},{br:"Google Chrome",b:"Chrome"},{br:"Opera",b:"Opera"}];function go(e,t){return t.indexOf(e)>-1}function vo(e,t){for(var n=0;n<t.length;n++)if(e==t[n].brand)return t[n].version;return null}function yo(){return this.getUserConsent()}var So=function(){function e(t,n){var a=Dn(n),i=t||{};Y(e,this,function(e){var t=lt();if(t){var n=t.hostname;n&&(e.domain="file:"===t.protocol?"local":n)}if(i.populateBrowserInfo){var r=i.userAgent,o=(i.userAgentData||{}).brands,s=dt();s&&(r=r||s.userAgent||"",o=o||(s.userAgentData||{}).brands),function(t,n){if(Ie(n))try{for(var a=0;a<bo.length;a++){var i=vo(bo[a].br,n);if(i)return e.browser=bo[a].b,void(e.browserVer=i)}}catch(e){}if(t){var r=function(e){if(e)for(var t=0;t<ho.length;t++)if(go(ho[t].ua,e))return ho[t].b;return mo}(t);e.browser=r,e.browserVer=function(e,t){return"MSIE"===t?function(e){var t=e.match(new RegExp("MSIE ([\\d,.]+)"));if(t)return t[1];var n=e.match(new RegExp("rv:([\\d,.]+)"));return n?n[1]:void 0}(e):function(e,t){"Safari"===e?e="Version":"Edge"===e&&go(_o,t)&&(e="Edg");var n=t.match(new RegExp(e+"/([\\d,.]+)"));return n||"Opera"===e&&(n=t.match(new RegExp("OPR/([\\d,.]+)")))?n[1]:mo}(t,e)}(t,r)}}(r,o);var c=function(){var e={h:0,w:0},t=rt();return t&&t.screen&&(e.h=screen.height,e.w=screen.width),e}();e.screenRes=c.w+"X"+c.h}me(i.gpcDataSharingOptIn)?e.gpcDataSharingOptIn=null:e.gpcDataSharingOptIn=i.gpcDataSharingOptIn,e.getUserConsent=function(){return i.userConsented||!!Ia(a,i.userConsentCookieName||"MSCC")},e.getUserConsentDetails=function(){var t=null;try{var n=i.callback;if(n&&n.userConsentDetails){var a=n.userConsentDetails();if(a){t=i.disableConsentDetailsSanitize?a:{};for(var r=0;r<po.length;r++){var o=po[r];t[o]=a[o]||!1}}}var s=e.gpcDataSharingOptIn;return null!==s&&((t=t||{}).GPC_DataSharingOptIn=!!s),t?JSON.stringify(t):null}catch(e){}},Ue(e,"userConsent",e.getUserConsent)})}return e._staticInit=void Ue(e.prototype,"userConsent",yo),e}();function Do(e,t,n,a,i){var r=t.ext[vr[e]];if(r)try{ye(a,function(e,t){if(xe(t)||Ce(t)||Oe(t)){var a=r[n[e]];!i&&(a||xe(a)||Ce(a)||Oe(a))&&(t=a),r[n[e]]=t}})}catch(e){}return r}var Io=function(){function e(t,n,a){Y(e,this,function(e){e.app=new Kr(n,a),e.cloud=new Wr,e.user=new uo(t,n,a),e.os=new io(n),e.web=new So(n,a);var i=new oo(t,a),r=new Jr(n,a),o=new fo(n);e.loc=new Xr,e.device=new qr;var s=new Br(a,n);e.session=new Rr;var c,d,l,u=(c=new so(n),d=m(),l=c||{},{getName:function(){return l.name},setName:function(e){d&&d.setName(e),l.name=e},getTraceId:function(){return l.traceId},setTraceId:function(e){d&&d.setTraceId(e),Xt(e)&&(l.traceId=e)},getSpanId:function(){return l.parentId},setSpanId:function(e){d&&d.setSpanId(e),Zt(e)&&(l.parentId=e)},getTraceFlags:function(){return l.traceFlags},setTraceFlags:function(e){d&&d.setTraceFlags(e),l.traceFlags=e}}),f=!(n||{}).eventContainExtFields;function p(){var t=e.session;if(t&&xe(t.customId))return t.customId;s.update();var n=s.automaticSession;if(n){var a=n.getId();a&&xe(a)&&(t.automaticId=a)}return t.automaticId}function m(){var e=u;return a&&a.getTraceCtx&&(e=a.getTraceCtx(!1)||u),e}e.getTraceCtx=function(){return u},e.getSessionId=p,e.applyApplicationContext=function(t){var n,a=e.app;Do(4,t,yr,((n={})[0]=a.id,n[1]=a.ver,n[2]=a.name,n[3]=a.locale,n[4]=a.getExpId(),n[5]=a.env,n),f)},e.applyUserContext=function(t){var n,a=e.user;Do(0,t,Dr,((n={})[1]=a.getLocalId(),n[0]=a.locale,n[2]=a.id,n),f)},e.applyWebContext=function(t){var n,a=e.web;Do(3,t,Sr,((n={})[0]=a.domain,n[1]=a.browser,n[2]=a.browserVer,n[3]=a.screenRes,n[5]=a.getUserConsentDetails(),n[4]=a.getUserConsent(),n),f)},e.applyOsContext=function(t){var n,a=e.os;Do(5,t,Ir,((n={})[0]=a.name,n[1]=a.ver,n),f)},e.applySdkContext=function(e){var t;Do(6,e,xr,((t={})[2]=i.installId,t[1]=i.getSequenceId(),t[3]=i.epoch,t),f)},e.applyIntWebContext=function(e){var t;Do(7,e,Cr,((t={})[0]=r.getMsfpc(),t[1]=r.getAnid(),t[2]=r.serviceName,t),f)},e.applyUtcContext=function(e){var t,n=((t={})[0]=o.popSample,t);o.eventFlags>0&&(n[1]=o.eventFlags),Do(8,e,Or,n,f)},e.applyLocContext=function(t){var n;Do(9,t,wr,((n={})[0]=e.loc.tz,n),f)},e.applySessionContext=function(e){var t;Do(4,e,Er,((t={})[0]=p(),t),f)},e.applyDeviceContext=function(t){var n,a=e.device;Do(1,t,Ar,((n={})[0]=a.localId,n[2]=a.make,n[3]=a.model,n[1]=a.deviceClass,n),f)},e.applyCloudContext=function(t){var n,a=e.cloud;Do(10,t,Lr,((n={})[0]=a.role,n[1]=a.roleInstance,n[2]=a.roleVer,n),f)},e.applyAITraceContext=function(e){var t;if(n.enableApplicationInsightsTrace){var a=m();a&&Do(2,e,kr,((t={})[0]=a.getTraceId(),t[1]=a.getName(),t[2]=a.getSpanId(),t),!1)}},e.applyDistributedTraceContext=function(e){var t,n=m();if(n){var a=((t={})[0]=n.getTraceId(),t[1]=n.getSpanId(),t),i=n.getTraceFlags();_e(i)||(a[2]=i),Do(11,e,Mr,a,!1)}}})}return e.__ieDyn=1,e}(),xo=[vr[4],vr[0],vr[3],vr[5],vr[6],vr[7],vr[8],vr[9],vr[1],vr[2],vr[11],vr[10]];const Co=function(e){function t(){var n,a,i,r=e.call(this)||this;return r.identifier="SystemPropertiesCollector",r.priority=3,r.version="3.2.15",Y(t,r,function(e,t){function r(){n=null,a={}}r(),e.initialize=function(a,r,o){t.initialize(a,r,o),i=e._getTelCtx().getExtCfg(e.identifier),n=new Io(a,i,r),r&&r.setTraceCtx&&r.setTraceCtx(n.getTraceCtx())},e.processTelemetry=function(t,r){wa(t,e.identifier),r=e._getTelCtx(r);var o,s,c=t.ext=t.ext?t.ext:{};t.data=t.data?t.data:{},Ae(xo,function(e){c[e]=c[e]||{}}),n&&(n.applyUtcContext(t),n.applyApplicationContext(t),n.applyUserContext(t),n.applyWebContext(t),n.applyOsContext(t),n.applySdkContext(t),n.applyIntWebContext(t),n.applyLocContext(t),n.applySessionContext(t),n.applyDeviceContext(t),i.enableApplicationInsightsTrace&&n.applyAITraceContext(t),i.enableDistributedTracing&&n.applyDistributedTraceContext(t),n.applyCloudContext(t)),Ae(Te(c),function(e){0===Te(c[e]).length&&delete c[e]}),o=a,s=t.data,o&&ye(o,function(e,t){s[e]||(s[e]=t)}),e.processNext(t,r)},e.getPropertiesContext=function(){return n},e.setProperty=function(e,t){a[e]=t},e._doTeardown=function(e,t){var a=(e||{}).core();if(a&&a.getTraceCtx&&n){var i=a.getTraceCtx(!1);i&&i===n.getTraceCtx()&&a.setTraceCtx(null)}r()}}),r}return C(t,e),t.__ieDyn=1,t}(kn);var Oo=r(280),wo=r(328);function Eo(e){return e&&e.replace(/(membership\|urn(%3a|:)spo(%3a|:)guest#)([^@]+)(@[^@]+)$/i,function(e,t,n,a,i,r){return"".concat(t).concat(function(e){if(!e||0===e.length)return 0;for(var t=5381,n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n),t&=t;return t}(i)).concat(r)})}function Ao(e,t){for(var n="";n.length<e;){var a=16*(null!=t?t:Math.random)();n+=(a|=0).toString(16)}return n}var Lo=function(){function e(e,t){e?(this.root=e.root,this.parent=e.current):this.root=this.parent="00000000-0000-0000-0000-000000000000",this.current=t||function(e){var t=[];t.push(Ao(8,e)),t.push(Ao(4,e));var n="4"+Ao(3,e);t.push(n);var a=Ao(4,e),i=parseInt(a[0],16);return i&=3,a=(i|=8).toString(16)+a.substr(1),t.push(a),t.push(Ao(12,e)),t.join("-")}()}return e._getCorrelationVector=function(){var t;return"undefined"!=typeof window?t=window.rootVector:"undefined"!=typeof self&&(t=self.rootVector),t||new e},e.prototype.toString=function(){return"".concat(this.root,"#").concat(this.parent,"#").concat(this.current)},e.RootVector=e._getCorrelationVector(),e}(),ko=["gcc","dod","gcch","ag08","ag09","chn"],Mo=new Set(["accounttype","appname","appid","browserismobile","browsermajver","browserminver","browsername","browseruseragent","clientname","cloudtype","environment","farmlabel","farmname","isauthenticated","issharedcontrol","market","manifest","osname","osversion","session","sitesubscriptionid","userid","version","workload","appinfo.language","appinfo.session","appinfo.manifest","appinfo.version","userinfo.language","userinfo.id","deviceinfo.id","deviceinfo.osname","deviceinfo.osversion","debug.isworker","debug.isoffline","isnucleusenabled","webtemplateid","weblog_type_qos","weblog_fullname","weblog_eventtype","webid","useragent","tenantid","siteid","sessionid","resourcetenantid","privacyclassification","originalsession","name","hometenantid","debug.eventsource","correlationvector","browserispwa","weblog_type_pageusage","eupl","failure","feature","result","weblog_type_engagement","usagetype","sitetype","listid","isintentional","docid","currentpage","component","weblog_type_rumonedataupload","rumonedataupload_dictionary_eupl","rumonedataupload_dictionary_fcp","rumonedataupload_dictionary_emergencyuploaded","rumonedataupload_dictionary_pagetransitiontype","rumonedataupload_dictionary_scenarioid","rumonedataupload_dictionary_tti","rumonedataupload_dictionary_sw_isgenerated","rumonedataupload_dictionary_sw_bypassed","rumonedataupload_streamname","persistence","weblog_type_customerpromise","duration","pillar","resulttype","ring","scenario","servergu","tenantid"]),Po=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="StrictCustomProperties",t.version="1.0",t.priority=212,t}return(0,Oo.__extends)(t,e),t.prototype.processTelemetry=function(e,t){var n,a,i,r;t=this._getTelCtx(t),(r=null===(n=e.ext)||void 0===n?void 0:n.app.env)&&ko.includes(r.toLowerCase())&&e.data&&(a=e.data,void 0===i&&(i=Mo),Object.keys(a).forEach(function(e){i.has(e.toLowerCase())||delete a[e]}),e.data["Debug.StrictContextRequired"]=!0),this.processNext(e,t)},t}(kn),To=" - ";function Uo(e){try{return"string"==typeof e&&0!==e.length&&isNaN(Number(e))&&"true"!==e&&"false"!==e}catch(e){return!1}}var Fo=function(){function e(e){this._scanned=0,this._sanitized=0}return e.prototype.shouldScan=function(e){return this._scanned++,!0},e.prototype.sanitize=function(e){return this._sanitized++,"".concat("SANITIZED").concat(To).concat(this.identifier)},e.prototype.warn=function(e){return"".concat("WARNING").concat(To).concat(this.identifier).concat(To).concat(e)},e.prototype.flushSummary=function(){var e={scanned:this._scanned,sanitized:this._sanitized,sanitizedRatio:0===this._scanned?0:this._sanitized/this._scanned};return this._scanned=0,this._sanitized=0,e},e}(),Ho="SPOPassword",Ro="SitePath",No="URL",Bo="URLOld",jo="Soap",Vo="KnownString",zo="QueryParam",Go="JWT",Ko="JWTOld",Wo="JWTInDepth",qo="Email",Qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=Vo,t._targets=["accesstoken:","password=",".files.1drv.com/",".s2s-files.1drv.com/",".livefilestore.com/","shares/u!","shares/b!","shares('u!","shares('b!","shares(u!","shares(b!","shares(@","shares(%40"],t}return(0,Oo.__extends)(t,e),t.prototype.scan=function(e){var t=e.toLowerCase();return this._targets.some(function(e){return-1!==t.indexOf(e)})},t}(Fo),Yo=function(e){function t(){var t=e.call(this)||this;t.identifier=zo,t._params=["access_token=","accesstoken=","auth_key=","authkey=","auth_token=","authtoken=","challengetoken=","email=","guestaccesstoken=","jwt=","login_hint=","originalpath=","password=","pageinfo=","patqp=","prooftoken=","querytemplate=","querytemplatepropertiesurl=","querytext=","redeem=","rwurl=","selectproperties=","share=","sig=","tempauth=","username=","wd="],t._delimiters=["&","?"],t._targets=[];for(var n=0,a=t._params;n<a.length;n++)for(var i=a[n],r=0,o=t._delimiters;r<o.length;r++){var s=o[r];t._targets.push("".concat(s).concat(i))}return t}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),this._delimiters.some(function(e){return t.includes(e)})},t.prototype.scan=function(e){var t=e.toLowerCase();return this._targets.some(function(e){return-1!==t.indexOf(e)})},t}(Fo),Jo=/(?:^|[^A-Za-z0-9_-])[A-Za-z0-9_-]{20,}\.[A-Za-z0-9_-]{3,}\.[A-Za-z0-9_-]{20,}/,Xo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=Go,t}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),-1!==t.toLowerCase().indexOf("ey")},t.prototype.scan=function(e){return function(e){return Jo.test(e)}(e)},t}(Fo),Zo=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],$o="/",es=["Mozilla","AppleWebKit","Gecko","Safari","Chrome","Edg"],ts=/\d+\.\d+(\.\d+)?(\.\d+)?/,ns=/\b\d{1,2}\/\d{1,2}\/(\d{4}|\d{2})\b/,as=/^\/\d+\/\d+\/\d+\/?$/,is=new Array(128).fill(!1);function rs(e,t,n){if(t>0&&e[t-1]===$o||" "===e[t+1]||n<e.length-1&&" "===e[n+1])return!1;for(var a=t+1;a<n;a++){var i=e.charCodeAt(a);if(!(i>=128||is[i]))return!1}return n>t+1}(0,Oo.__spreadArray)((0,Oo.__spreadArray)([],Zo,!0),["%","-",".","_","~",":","?","#","[","]","@","!","$","&","(",")","*","+",";"," ","=","'"],!1).forEach(function(e){is[e.charCodeAt(0)]=!0});var os=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=Ro,t}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),t.indexOf($o)>-1},t.prototype.scan=function(e){return function(e){if(e.includes("W3SVC")||function(e){return es.some(function(t){return e.includes(t)})||ts.test(e)}(e)||ns.test(e)||as.test(e))return!1;for(var t=e.length,n=0;n<t;n++)if(e[n]===$o){var a=n,i=e.indexOf($o,a+1);if(-1===i)continue;if(i-a<=1)continue;if(!rs(e,a,i))continue;var r=e.indexOf($o,i+1);if(-1===r)return!0;if(r-i<=1)continue;if(rs(e,i,r))return!0}return!1}(e)},t.prototype.warn=function(e){return"WARNING: aka.ms/ODSPSanitizerSitePath - ".concat(e)},t}(Fo),ss=/<soap:Envelope/i,cs=/%[0-9A-Fa-f]{2}/,ds=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=jo,t}return(0,Oo.__extends)(t,e),t.prototype.scan=function(e){return function(e){if(ss.test(e))return!0;if(cs.test(e))try{var t=decodeURIComponent(e);return ss.test(t)}catch(e){return!1}return!1}(e)},t}(Fo),ls=/_sp0[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/i,us=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=Ho,t}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),-1!==t.toLowerCase().indexOf("_sp0")},t.prototype.scan=function(e){var t=e.match(ls);return!!t&&0!==t.length},t}(Fo),fs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=Bo,t}return(0,Oo.__extends)(t,e),t.prototype.scan=function(e){for(var t=0,n=["https://","http://"];t<n.length;t++){var a=n[t],i=e.indexOf(a);if(-1!==i){var r=i+a.length;if(" "!==e[r])return!e.substring(r).includes("{ length:")}}return!1},t.prototype.warn=function(e){return"WARNING: aka.ms/ODSPSanitizerURL - ".concat(e)},t}(Fo),ps=new Set(["/"," ","\t","\n","\r","{","}"]),ms="http://",_s="https://",hs=function(e){function t(t){var n,a=e.call(this,t)||this;a.identifier=No;var i=(null===(n=t.trustedDomains)||void 0===n?void 0:n.map(function(e){return e.toLowerCase()}))||[];return a._trustedDomainsSet=new Set(i),a._wwwTrustedDomainsSet=new Set(i.map(function(e){return"www.".concat(e)})),a}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),t.includes(ms)||t.includes(_s)},t.prototype.scan=function(e){for(var t,n=this._findUrls(e),a=!1,i=n.next();!i.done;){if(t=i.value,!e.includes("{ length:",t)){var r=this._extractDomain(e,t);if(r&&!this._trustedDomainsSet.has(r)&&!this._wwwTrustedDomainsSet.has(r)){a=!0;break}}i=n.next()}return a},t.prototype._findUrls=function(e){var t,n,a,i;return(0,Oo.__generator)(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<e.length?(n=-1,-1!==(a=e.indexOf("https://",t))?n=a+_s.length:-1!==(i=e.indexOf("http://",t))&&(n=i+ms.length),-1===n?[3,3]:[4,n]):[3,3];case 2:return r.sent(),t=n,[3,1];case 3:return[2]}})},t.prototype._extractDomain=function(e,t){for(var n=e.length,a=t;a<e.length;a++)if(ps.has(e[a])){n=a;break}return e.substring(t,n).toLowerCase()},t}(fs),bs=new Set((0,Oo.__spreadArray)((0,Oo.__spreadArray)([],Zo,!0),[".","-","_","#"],!1)),gs=new Set((0,Oo.__spreadArray)((0,Oo.__spreadArray)([],Zo,!0),[".","-"],!1)),vs=new Set(Zo),ys=["@","%40","_at_"],Ss=function(e){function t(t){var n;void 0===t&&(t={});var a=e.call(this)||this;a.identifier="Email";var i=(null===(n=t.trustedDomains)||void 0===n?void 0:n.map(function(e){return e.toLowerCase()}))||[];return a._trustedDomainsSet=new Set(i),a}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),null!==this._findAtCharacter(t.toLowerCase(),0)},t.prototype.scan=function(e){for(var t=e.toLowerCase(),n=this._findEmails(t),a=!1,i=n.next();!i.done;){var r=i.value,o=this._isUserPartValid(t,r),s=this._extractDomain(t,r);if(o&&void 0!==s&&!this._trustedDomainsSet.has(s.toLowerCase())){a=!0;break}i=n.next()}return a},t.prototype.warn=function(e){return"WARNING: aka.ms/ODSPSanitizerEmail - ".concat(e)},t.prototype._findAtCharacter=function(e,t){for(var n=null,a=0,i=ys;a<i.length;a++){var r=i[a],o=e.indexOf(r,t);-1!==o&&(null===n||o<n.index)&&(n={index:o,variant:r})}return n},t.prototype._findEmails=function(e){var t,n;return(0,Oo.__generator)(this,function(a){switch(a.label){case 0:t=0,a.label=1;case 1:return t<e.length?null===(n=this._findAtCharacter(e,t))?[3,3]:[4,n]:[3,3];case 2:return a.sent(),t=n.index+n.variant.length,[3,1];case 3:return[2]}})},t.prototype._isUserPartValid=function(e,t){var n=t.index;if(n<3)return!1;for(var a=3;a>0;a--){var i=e.charCodeAt(n-a);if(!(i>=128||bs.has(String.fromCharCode(i))))return!1}return!0},t.prototype._extractDomain=function(e,t){var n=t.index+t.variant.length;if(!(t.index<0||n>=e.length)){var a=e.indexOf(".",n);if(-1!==a&&!(a-n>255)&&"-"!==e[n]){for(var i=n;i<a;i++){var r=e.charCodeAt(i);if(!(r>=128||vs.has(String.fromCharCode(r))))return}for(var o=a+1,s=o;s<e.length&&e.charCodeAt(s)<128&&gs.has(e[s]);)s++;if(!(s-o<2))return e.substring(n,s).toLowerCase()}}},t}(Fo),Ds=new Set((0,Oo.__spreadArray)((0,Oo.__spreadArray)([],Zo,!0),[".","-","_","#"],!1)),Is=new Set((0,Oo.__spreadArray)((0,Oo.__spreadArray)([],Zo,!0),[".","-"],!1)),xs=new Set(Zo),Cs=function(e){function t(t){var n;void 0===t&&(t={});var a=e.call(this)||this;a.identifier="EmailOld";var i=(null===(n=t.trustedDomains)||void 0===n?void 0:n.map(function(e){return e.toLowerCase()}))||[];return a._trustedDomainsSet=new Set(i),a}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),-1!==t.indexOf("@")},t.prototype.scan=function(e){for(var t,n=this._findEmails(e),a=!1,i=n.next();!i.done;){t=i.value;var r=this._isUserPartValid(e,t),o=this._extractDomain(e,t);if(r&&void 0!==o&&!this._trustedDomainsSet.has(o.toLowerCase())){a=!0;break}i=n.next()}return a},t.prototype.warn=function(e){return"WARNING: aka.ms/ODSPSanitizerEmail - ".concat(e)},t.prototype._findEmails=function(e){var t,n;return(0,Oo.__generator)(this,function(a){switch(a.label){case 0:t=0,a.label=1;case 1:return t<e.length?-1===(n=e.indexOf("@",t))?[3,3]:[4,n]:[3,3];case 2:return a.sent(),t=n+1,[3,1];case 3:return[2]}})},t.prototype._isUserPartValid=function(e,t){if(t<3)return!1;for(var n=3;n>0;n--){var a=e.charCodeAt(t-n);if(!(a>=128||Ds.has(String.fromCharCode(a))))return!1}return!0},t.prototype._extractDomain=function(e,t){if(!(t<0||t>=e.length-1)){var n=e.indexOf(".",t);if(-1!==n&&!(n-t-1>255)&&"-"!==e[t+1]){for(var a=t+1;a<n;a++){var i=e.charCodeAt(a);if(!(i>=128||xs.has(String.fromCharCode(i))))return}for(var r=n+1,o=r;o<e.length&&e.charCodeAt(o)<128&&Is.has(e[o]);)o++;if(!(o-r<2))return e.substring(t+1,o).toLowerCase()}}},t}(Fo),Os=/(?:^|[^A-Za-z0-9_-])[A-Za-z0-9_-]{20,}\.[A-Za-z0-9_-]{3,}\.[A-Za-z0-9_-]{20,}/,ws=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=Ko,t}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),-1!==t.toLowerCase().indexOf("eyj0exaioijkv1qilc")},t.prototype.scan=function(e){return function(e){return Os.test(e)}(e)},t}(Fo),Es=/\bey[A-Za-z0-9_-]{18,}\.(?:[A-Za-z0-9_-]*)\.[A-Za-z0-9_-]{43,}\b/g,As=/ey[A-Za-z0-9_-]{18,}\./i,Ls={SPOPassword:us,Soap:ds,KnownString:Qo,QueryParam:Yo,SitePath:os,JWT:Xo,JWTOld:ws,JWTInDepth:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier=Wo,t}return(0,Oo.__extends)(t,e),t.prototype.shouldScan=function(t){return e.prototype.shouldScan.call(this,t),As.test(t)},t.prototype.scan=function(e){var t,n;try{t=decodeURIComponent(e)}catch(n){t=e}for(Es.lastIndex=0;null!==(n=Es.exec(t));)if(this._isValidJWT(n[0]))return!0;return!1},t.prototype._isValidJWT=function(e){var t=e.split(".");if(3!==t.length)return!1;var n=t[0],a=t[1],i=t[2];return this._isValidBase64Url(n)&&(0===a.length||this._isValidBase64Url(a))&&this._isValidBase64Url(i)},t.prototype._isValidBase64Url=function(e){try{var t=e.replace(/-/g,"+").replace(/_/g,"/");if(t.length%4==1)return!1;var n=(4-t.length%4)%4,a=t+"=".repeat(n);return atob(a),!0}catch(e){return!1}},t}(Fo),URL:hs,URLOld:fs,Email:Ss,EmailOld:Cs},ks={};function Ms(e,t){for(var n=new Map,a=0,i=e;a<i.length;a++){var r=i[a];if("function"==typeof r){var o=r();n.set(o.identifier,o)}else{var s=r,c=Ls;n.set(s,new c[s]((null==t?void 0:t[s])||ks))}}return n}var Ps=function(){function e(e){var t,n=this;if(this._excludedPaths=new Set,this._warningPaths=new Set,this._warningScanners=new Set,this._sanitizeScanners=new Set,this._fieldScanners=new Map,this._viewedObjectCount=0,this._sanitizedObjectCount=0,this._excludedPaths=new Set(e.excludedPaths||[]),this._warningPaths=new Set(e.warningPaths||[]),this._traversalContext={excludedPaths:this._excludedPaths,parseJsonStrings:e.parseJsonStrings||!1,parseArrayStrings:null!==(t=e.parseArrayStrings)&&void 0!==t?t:e.parseJsonStrings||!1,skipObjectKeys:e.skipObjectKeys||!1},e.isExternalScannerSupportKSActive){var a=(0,Oo.__spreadArray)((0,Oo.__spreadArray)([],e.warn||[],!0),e.sanitize||[],!0);return this._fieldScanners=Ms(a,e.scannerOptions),this._warningScanners=new Set(e.warn||[]),void(this._sanitizeScanners=new Set(e.sanitize||[]))}var i=Ms(e.sanitize||[],e.scannerOptions),r=Ms(e.warn||[],e.scannerOptions);i.forEach(function(e){n._fieldScanners.set(e.identifier,e),n._sanitizeScanners.add(e.identifier)}),r.forEach(function(e){n._fieldScanners.set(e.identifier,e),n._warningScanners.add(e.identifier)})}return e.prototype.addExclusion=function(e){this._excludedPaths.add(e)},e.prototype.addWarningPath=function(e){this._warningPaths.add(e)},e.prototype.flushSummary=function(){var e={sanitizedObjectCount:this._sanitizedObjectCount,viewedObjectCount:this._viewedObjectCount};return this._sanitizedObjectCount=0,this._viewedObjectCount=0,this._fieldScanners.forEach(function(t){e[t.identifier]=t.flushSummary()}),e},e.prototype.sanitizeOld=function(e,t,n){var a=this,i=!1;return this._fieldScanners.forEach(function(r){e=Ts(e,function(e,n){try{if(a._shouldSanitize(r,n,e)){null==t||t(r.identifier,n),i=!0;var o=e;return a._warningScanners.has(r.identifier)&&(o=r.warn(o)),a._sanitizeScanners.has(r.identifier)&&(o=r.sanitize(o)),o}return e}catch(a){return null==t||t(r.identifier,"".concat(n,"!SanitizerError!")),e}},(0,Oo.__assign)((0,Oo.__assign)({},a._traversalContext),n))}),this._viewedObjectCount++,i&&this._sanitizedObjectCount++,e},e.prototype.sanitize=function(e,t,n){var a=this;if(null==e)return this._viewedObjectCount++,e;var i=!1,r=Ts(e,function(e,n){if(!Uo(e))return e;var r=e,o=!1;return a._fieldScanners.forEach(function(e,s){try{if(o||!e.shouldScan(r)||!e.scan(r))return;if(null==t||t(s,n),i=!0,a._warningPaths.has(n))return void(r=e.warn(r));if(a._sanitizeScanners.has(s))return r=e.sanitize(r),void(o=!0);a._warningScanners.has(s)&&(r=e.warn(r))}catch(e){null==t||t(s,"".concat(n,"!SanitizerError!"))}}),r},(0,Oo.__assign)((0,Oo.__assign)({},this._traversalContext),n));return this._viewedObjectCount++,i&&this._sanitizedObjectCount++,r},e.prototype._shouldSanitize=function(e,t,n){return Uo(n)&&e.shouldScan(n)&&e.scan(n)},e}();function Ts(e,t,n){var a=n||{},i=a.excludedPaths,r=a.parseJsonStrings,o=a.parseArrayStrings,s=a.skipObjectKeys,c=(null==n?void 0:n.currentPath)||"";if(null==i?void 0:i.has(c))return e;if(Array.isArray(e))return e.map(function(e,a){return Ts(e,t,(0,Oo.__assign)((0,Oo.__assign)({},n),{currentPath:"".concat(c,"[").concat(a,"]")}))});if("object"==typeof e&&null!==e){for(var d={},l=0,u=Object.keys(e);l<u.length;l++){var f=u[l],p="".concat(c,"#");s||(null==i?void 0:i.has(p))||(f=t(f,p)),d[f]=Ts(e[f],t,(0,Oo.__assign)((0,Oo.__assign)({},n),{currentPath:c?"".concat(c,".").concat(f):f}))}return d}if("string"!=typeof e||!r||!("{"===e.charAt(0)||o&&"["===e.charAt(0)))return t(e,c);try{var m=Ts(JSON.parse(e),t,(0,Oo.__assign)((0,Oo.__assign)({},n),{currentPath:"".concat(c,"$")}));return JSON.stringify(m)}catch(n){return t(e,c)}}var Us=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="DataScrubber",t.version="1.0",t.priority=490,t._config={},t._eventsScanned=0,t._isEnabled=!0,t}return(0,Oo.__extends)(t,e),t.prototype.initialize=function(t,n,a){e.prototype.initialize.call(this,t,n,a),this._config=this._getTelCtx().getExtCfg(this.identifier);try{this.updateSanitizer(this._config)}catch(e){this.sanitizer=void 0}},t.prototype.processTelemetry=function(e,t){if(t=this._getTelCtx(t),this._isEnabled){try{e=this._sanitizeEvent(e)}catch(t){this._addDebugInfo(e,"SanitizationFailed","true")}this._eventsScanned++>=200&&(this._eventsScanned=0,this._sendSummaryEvent()),this.processNext(e,t)}else this.processNext(e,t)},t.prototype.updateSanitizer=function(e){this.sanitizer=new Ps(e)},t.prototype.setEnabled=function(e){this._isEnabled=e},t.prototype._sanitizeEvent=function(e){if(!this.sanitizer)throw new Error("Sanitizer not initialized");var t=(0,Oo.__assign)({},e),n={},a=function(e){return function(t,a){n[t]||(n[t]=[]),n[t].push("".concat(e,".").concat(a))}};return t.data&&(this._config.isOptimzeSanitizeKSActive?t.data=this.sanitizer.sanitizeOld(t.data,a("data")):t.data=this.sanitizer.sanitize(t.data,a("data"))),this._config.shouldScanExtensionFields&&t.ext&&(this._config.isOptimzeSanitizeKSActive?t.ext=this.sanitizer.sanitizeOld(t.ext,a("ext")):t.ext=this.sanitizer.sanitize(t.ext,a("ext"))),Object.keys(n).length>0&&this._addDebugInfo(t,"SanitizersUsed",n),t},t.prototype._addDebugInfo=function(e,t,n){var a,i,r="Debug.".concat(this.identifier);e.data&&(e.data[r]=JSON.stringify((0,Oo.__assign)((0,Oo.__assign)({},JSON.parse((null===(i=e.data)||void 0===i?void 0:i[r])||"{}")),((a={})[t]=n,a))))},t.prototype._sendSummaryEvent=function(){var e,t=null===(e=this.sanitizer)||void 0===e?void 0:e.flushSummary();if(t){for(var n={},a=0,i=Object.keys(t);a<i.length;a++){var r=i[a];n[r]=JSON.stringify(t[r])}var o={name:"ev_sanitizer",iKey:this._getTelCtx().getCfg().instrumentationKey,data:(0,Oo.__assign)({Name:"Sanitization.Summary"},n)};this._getTelCtx().core().track(o)}},t}(kn),Fs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="StringifyProperties",t.version="1.0",t.priority=214,t}return(0,Oo.__extends)(t,e),t._stringifyObject=function(e){for(var n in e)if(void 0===e[n]||null===e[n]||"object"==typeof e[n])t._stringifyObject(e[n]);else try{e[n]=e[n].toString()}catch(t){e[n]="StringifyProperties toString error"}},t.prototype.processTelemetry=function(e,n){n=this._getTelCtx(n),t._stringifyObject(e.data),this.processNext(e,n)},t}(kn),Hs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="DebugTelemetry",t.version="1.0",t.priority=1020,t}return(0,Oo.__extends)(t,e),t._getEventId=function(e){var t,n,a,i,r,o,s;return[e.name,null===(t=e.data)||void 0===t?void 0:t.Name,null===(n=e.data)||void 0===n?void 0:n.Scenario,null===(a=e.data)||void 0===a?void 0:a.WebLog_EventType,null===(i=e.data)||void 0===i?void 0:i.ResultType,null===(r=e.data)||void 0===r?void 0:r.PG_EventName,null===(o=e.data)||void 0===o?void 0:o.PG_FieldName,null===(s=e.data)||void 0===s?void 0:s.PG_TypeAsText].reduce(function(e,t){return e?e.concat(t?"".concat(" ").concat(t):""):t})||"ev_<unknown?>"},t._flattenAndStringifyEvent=function(e,t){var n={};if(t<=0)return e;for(var a=function(t){Object.keys(e).forEach(function(a){var i=e[a];"object"==typeof i?1===t?n[a]=JSON.stringify(e[a]):Object.keys(i).forEach(function(e){n["".concat(a,".").concat(e)]=i[e]}):n[a]=e[a]}),e=(0,Oo.__assign)({},n),n={}},i=t;i>0;i--)a(i);return e},t._logGroup=function(e,t,n,a){t?console.groupCollapsed("%c".concat(e),n):console.group("%c".concat(e),n);try{a()}catch(e){console.error(e)}console.groupEnd()},t._logTable=function(e,t){console.log("%c".concat(e),"font-size:12px;font-weight:bold"),console.table(t)},t.prototype.processTelemetry=function(e,t){var n;if(t=this._getTelCtx(t),void 0===this._isUploadingTelemetry){var a=t.getCfg();this._isUploadingTelemetry=!(null===(n=a.channelConfiguration)||void 0===n?void 0:n.disableTelemetry)}this._logEvent(e),this.processNext(e,t)},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.flush=function(e,t){},t.prototype._getGroupCSS=function(e){var t="font-size:12px;font-weight:bold;border:1px solid gray;padding:2px;border-radius:5px;";return"ev_privacyguard"===e.name?t+="border-color:#ff0000; border-radius: 3px":void 0!==this._isUploadingTelemetry&&(t+=this._isUploadingTelemetry?"border-color:#00ff00;":"border-color:#077fe8"),t},t.prototype._logEvent=function(e){var n=t._getEventId(e),a=t._flattenAndStringifyEvent(e.data||{},2),i=this._getGroupCSS(e);t._logGroup(n,!0,i,function(){t._logTable("Data Fields",a),console.log("Raw event:\n%o",e)})},t}(kn),Rs=r(277);function Ns(e){if(Rs.KillSwitch.isActivated("BABB93B6-A527-424E-BE9D-FDAA87163C4A"))return!1;switch(e){case Ho:return!Rs.KillSwitch.isActivated("4D2C42D9-AD8D-4CDD-BBDE-1A59004B0D5F");case Vo:return!Rs.KillSwitch.isActivated("5881AB4E-62A3-466A-9121-4696A4C7FFAB");case zo:return!Rs.KillSwitch.isActivated("74E05F7C-7187-4B3C-9B48-13C1742D5BB7");case Ko:return Rs.KillSwitch.isActivated("EBFAA43D-4287-4B42-B15E-915E6C993511");case Go:return!Rs.KillSwitch.isActivated("865C15CD-213C-4A6A-A51D-67398DCE0975");case Ro:return!Rs.KillSwitch.isActivated("ABCC634A-D509-4E2F-8DBD-72D6DDB70304");case No:return!Rs.KillSwitch.isActivated("538060DB-E344-47C6-B004-746651420C50");case Bo:return Rs.KillSwitch.isActivated("20E10301-7F7C-4806-8943-1C9E19D7EAB2");case jo:return!Rs.KillSwitch.isActivated("0EDD0E35-2E79-453E-9674-E3EAAB9CB032");case qo:return!Rs.KillSwitch.isActivated("436FE24B-4602-4C6C-830B-CFF37FF73F30");case"EmailOld":return Rs.KillSwitch.isActivated("89E1A753-A099-48A0-B909-E830C31F9745");default:return!0}}function Bs(e){switch(e){case Ro:return!Rs.KillSwitch.isActivated("E51A83DC-7071-44F9-B5B7-96C4604CAE9F");case No:return!Rs.KillSwitch.isActivated("5C465AAE-218B-439A-894C-8F10019A3B0D");case qo:return!Rs.KillSwitch.isActivated("0B689E10-1669-4662-A229-A7A6CDDC97A7");default:return!1}}function js(e){return"function"!=typeof e}function Vs(){return Rs.KillSwitch.isActivated("80DFF50F-3524-4803-AEC5-3EC5582EEBBE")}const zs="MicrosoftApplicationsTelemetryDeviceId";class Gs{createEvent(e,...t){return new e(...t)}createAndLogEvent(e,...t){const n=new e(...t);return this.logEvent(n),n}logEvent(e){const t={...e.getEventMetadata(this._loggerOptions,this._context),...this._getBaseEventData(),...this._getExtraEventMetadata(this,e)};let n;e.vector&&(n=new Lo({root:e.vector.root,current:e.vector.parent},e.vector.current));const a={...t,CorrelationVector:n?.toString()},i=e.ariaTableName.toLowerCase();this._logger.track({name:i,data:a})}flush(e,t){this._logger.flush(e,t)}_initializeProperties(e){this._updateProperties(e);const t=this._propertyStore?.getProperty("AppInfo.Language")||"undefined"!=typeof document&&document?.documentElement?.lang||"";this._propertiesPlugin.setProperty("AppInfo.Language",t);const n=this._logger.getCookieMgr()?.get(zs)||this._propertyStore?.getProperty(zs)||"";this._propertiesPlugin.setProperty("DeviceInfo.Id",n),this._propertiesPlugin.getPropertiesContext().user.localId=this._getPrefixedUserId(),this._propertiesPlugin.getPropertiesContext().app.ver=e.Version,this._propertiesPlugin.getPropertiesContext().app.locale=t}_updateProperties(e){const{Session:t,Version:n,OSName:a,OSVersion:i,Market:r,UserId:o,Manifest:s,...c}=e,d={"AppInfo.Session":t,"AppInfo.Manifest":s,"AppInfo.Version":n,"UserInfo.Language":r||"","UserInfo.Id":o&&Eo(o),"DeviceInfo.OsName":a,"DeviceInfo.OsVersion":i,...c};Object.keys(d).forEach(e=>{const t=d[e];null!=t&&this._propertiesPlugin.setProperty((0,wo.capitalize)(e),t)})}_getUserIdPrefix(){return"Consumer"===this._context?.AccountType||"ConsumerAnonymous"===this._context?.AccountType||"ConsumerOnSPO"===this._context?.AccountType?"m:":"Business"===this._context?.AccountType||"BusinessAnonymous"===this._context?.AccountType?"i:":"c:"}_getPrefixedUserId(){const e=this._context.UserId;return e&&e.length>2&&":"!==e[1]?`${this._getUserIdPrefix()}${e}`:e}_getBaseEventData(){return{ServerGU:this._loggerOptions.serverGU,TenantId:this._context.SiteSubscriptionId||"",ClientName:this._context.ClientName||"",FarmLabel:this._context.FarmLabel||"",FarmName:this._context.FarmName||"",IsAuthenticated:this._context.IsAuthenticated?1:0,UserAgent:this._context.BrowserUserAgent||"",BrowserIsMobile:!!this._context.BrowserIsMobile,BrowserIsPWA:!!this._context.BrowserIsPWA,BrowserMajVer:this._context.BrowserMajVer||0,BrowserMinVer:this._context.BrowserMinVer||"",BrowserName:this._context.BrowserName||"",BrowserUserAgent:this._context.BrowserUserAgent||""}}constructor(e,t,n){this._logger=new La,this._context=t,this._loggerOptions=e,this._postChannel=new mr,this._propertyStore=n?.propertyStorageOverride,this._propertiesPlugin=new Co,this._getExtraEventMetadata=e.getExtraEventMetadata||(()=>({}));const a=[this._postChannel];let i=this._loggerOptions.getTenantToken(this._loggerOptions,this._context);n?.disableTelemetry&&(a.pop(),i="00000000-0000-0000-0000-000000000000",n={...n,enableStorageChannel:!1});const r=new Di,o={env:t.Environment,populateBrowserInfo:!0,populateOperatingSystemInfo:!0},s={storageKey:"amplify_1ds_offline",indexedDbName:"amplify_1ds_offline",providers:[ja.IndexedDb,ja.LocalStorage],maxStorageItems:1e4};n?.enableStorageChannel&&a.unshift(r),(n?.isDebug||"true"===function(e){try{return window?.sessionStorage?.getItem("EnableConsoleTelemetryDebug")}catch(e){return null}}())&&a.unshift(new Hs);const c=new Fs,d=new Po,l=new Us,u=function(){var e,t,n;if(Rs.KillSwitch.isActivated("D1A947A7-FF47-4643-936F-AA49C462EA70"))return{disable:!0};var a,i={warn:[],sanitize:[Ho,Vo,zo,Ro,No,Go,qo],parseJsonStrings:!0},r=(null===(t=i.sanitize)||void 0===t?void 0:t.filter(function(e){return js(e)&&Ns(e)&&!Bs(e)}))||[],o=(null===(n=i.sanitize)||void 0===n?void 0:n.filter(function(e){return js(e)&&Ns(e)&&Bs(e)}))||[];return(0,Oo.__assign)((0,Oo.__assign)({},i),{sanitize:r,warn:o,shouldScanExtensionFields:Rs.KillSwitch.isActivated("9BDABF72-C748-41CA-8A43-1EE2CD6C4D26"),parseJsonStrings:!Rs.KillSwitch.isActivated("AD54604C-78BF-4068-B45C-67C6B7D59373"),parseArrayStrings:!Rs.KillSwitch.isActivated("A7DBBB71-8A21-44E1-9888-ECFE5D5BC304"),excludedPaths:(a={"UserInfo.Id":"32622FEC-0A09-4437-9304-7F37A3B8C3C7","#":"75E7DF52-7261-44FC-A849-3C4E4E1355EF"},Object.keys(a).filter(function(e){return!Rs.KillSwitch.isActivated(a[e])})),skipObjectKeys:Rs.KillSwitch.isActivated("F15D4019-401C-4065-9B1D-E7AFF16ABEAD"),isOptimzeSanitizeKSActive:Rs.KillSwitch.isActivated("E120FBF9-6179-4A1B-B922-0A4E2660A429"),scannerOptions:(e={},e.URL={trustedDomains:Rs.KillSwitch.isActivated("F5BB0FC8-289D-4965-8353-A6EB2135BB4E")?void 0:["res-2.df.onecdn.static.microsoft","res-1.cdn.office.net","r4.res.office365.com","js.monitor.azure.com","ajax.aspnetcdn.com"]},e),isExternalScannerSupportKSActive:Rs.KillSwitch.isActivated("05BD759F-D561-4F40-B83E-AD4C02F9CD12")})}(),f={instrumentationKey:i,enableCompoundKey:!0,disableEventTimings:!Vs(),channels:[a],extensionConfig:{[this._propertiesPlugin.identifier]:o,[l.identifier]:u,[r.identifier]:s},channelConfiguration:{disableTelemetry:n?.disableTelemetry},propertyConfiguration:{scrubIpOnly:!0},...n},p=(e,t,n)=>{this._propertiesPlugin.setProperty(e,t)};this._ariaContextShim={setContext:p,getSemanticContext:()=>({setAppLanguage:e=>p("AppInfo.Language",e),setAppVersion:e=>p("AppInfo.Version",e),setUserLanguage:e=>p("UserInfo.Language",e),setUserId:e=>p("UserInfo.Id",e),setDeviceOsName:e=>p("DeviceInfo.OsName",e),setDeviceOsVersion:e=>p("DeviceInfo.OsVersion",e)})};const m=this._propertyStore?.getProperty("AppInfo.Language")||"undefined"!=typeof document&&document?.documentElement?.lang||"",_=this._logger.getCookieMgr()?.get(zs)||this._propertyStore?.getProperty(zs)||"";n?.unShimUpdateContext?(this._propertiesPlugin.initialize(f,this._logger,[]),this._initializeProperties(t)):(function(e,t){var n=t.Session,a=t.Version,i=t.OSName,r=t.OSVersion,o=t.Market,s=t.UserId,c=t.Manifest,d=(0,Oo.__rest)(t,["Session","Version","OSName","OSVersion","Market","UserId","Manifest"]),l=e.getSemanticContext();if(n&&e.setContext("AppInfo.Session",n),c&&e.setContext("AppInfo.Manifest",c),a&&l.setAppVersion(a),l.setUserLanguage(o||""),s){var u=Eo(s);l.setUserId(u)}for(var f in i&&l.setDeviceOsName(i),r&&l.setDeviceOsVersion(r),d)if(Object.prototype.hasOwnProperty.call(d,f)){if(null==d[f])continue;var p=(0,wo.capitalize)(f);e.setContext(p,d[f])}}(this._ariaContextShim,t),Vs()&&this._propertiesPlugin.setProperty("Debug.NativeStringify","function stringify() { [native code] }"===String(JSON.stringify)),this._propertiesPlugin.setProperty("AppInfo.Language",m),this._propertiesPlugin.setProperty("DeviceInfo.Id",_));let h=[this._propertiesPlugin];if(n?.disableStringifyPlugin||(c.initialize(f,this._logger,[]),h=h.concat(c)),n?.disableStrictContextPlugin||(h=h.concat(d)),n?.disableScrubDataPlugin||(l.initialize(f,this._logger,[]),h=h.concat(l)),!n?.unShimUpdateContext){this._propertiesPlugin.initialize(f,this._logger,[]);const e=this._getPrefixedUserId();this._propertiesPlugin.getPropertiesContext().user.localId=e,this._propertiesPlugin.getPropertiesContext().app.ver=t.Version,this._propertiesPlugin.getPropertiesContext().app.locale=m}this._logger.initialize(f,h)}}})(),o})());